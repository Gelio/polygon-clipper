!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=38)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),i=n(11),r=n(7),a={newLinePreviewProperties:new i.LineProperties(o.COLORS.BLUE,2),newPolygonLineProperties:new i.LineProperties(o.COLORS.RED,1),polygonLineProperties:i.LineProperties.getDefault(),applicationUIContainerID:"application-ui",hitTolerance:10,minPolygonPoints:3,doubleClickMaxDelay:500,displayPathGhostWhenDragging:!1,canvasFont:"30pt serif",loadingBarHideDelay:1500,initialCustomBackgroundColorHex:"#00a2e8",presetBackgroundTextures:["images/backgrounds/red-bricks.jpg","images/backgrounds/Funny-Cat-Face.jpg","images/backgrounds/hqdefault.jpg"],initialCustomHeightMapColorHex:"#000000",presetHeightMaps:["images/height-maps/brick_heightmap.png","images/height-maps/terrain-heightmap.png"],initialCustomNormalMapColorHex:"#7f7fff",presetNormalMaps:["images/normal-maps/brick_normalmap.png","images/normal-maps/normal_map.jpg","images/normal-maps/circles.png"],presetLightColor:new r.Vector3(1,1,1),presetHeightMapIntensity:.05,movingLight:{horizontalLapTime:1e4,verticalLapTime:8e3,minVerticalAngle:20/180*Math.PI,maxVerticalAngle:70/180*Math.PI,tickInterval:50,defaultRadius:500}};e.configuration=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.payload=null,this.eventType=t.eventType,this.handled=!1}return Object.defineProperty(t,"eventType",{get:function(){return"RenderEvent"},enumerable:!0,configurable:!0}),t}();e.RenderEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(16);e.NewBackgroundTextureEvent=o.NewBackgroundTextureEvent;var i=n(17);e.NewHeightMapEvent=i.NewHeightMapEvent;var r=n(18);e.NewHeightMapIntensityEvent=r.NewHeightMapIntensityEvent;var a=n(19);e.NewLightColorEvent=a.NewLightColorEvent;var s=n(20);e.NewLightPositionEvent=s.NewLightPositionEvent;var l=n(21);e.NewLightPositionRadiusEvent=l.NewLightPositionRadiusEvent;var c=n(22);e.NewLightTypeEvent=c.NewLightTypeEvent;var u=n(23);e.NewNormalMapEvent=u.NewNormalMapEvent},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.payload=null,this.eventType=t.eventType,this.handled=!1}return Object.defineProperty(t,"eventType",{get:function(){return"SyncComponentsEvent"},enumerable:!0,configurable:!0}),t}();e.SyncComponentsEvent=o},function(t,e){function n(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=o(i);return[n].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([r]).join("\n")}return[n].join("\n")}function o(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var o=n(e,t);return e[2]?"@media "+e[2]+"{"+o+"}":o}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){function o(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=f[o.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](o.parts[r]);for(;r<o.parts.length;r++)i.parts.push(u(o.parts[r],e))}else{for(var a=[],r=0;r<o.parts.length;r++)a.push(u(o.parts[r],e));f[o.id]={id:o.id,refs:1,parts:a}}}}function i(t,e){for(var n=[],o={},i=0;i<t.length;i++){var r=t[i],a=e.base?r[0]+e.base:r[0],s=r[1],l=r[2],c=r[3],u={css:s,media:l,sourceMap:c};o[a]?o[a].parts.push(u):n.push(o[a]={id:a,parts:[u]})}return n}function r(t,e){var n=v(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=b[b.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),b.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=v(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function a(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=b.indexOf(t);e>=0&&b.splice(e,1)}function s(t){var e=document.createElement("style");return t.attrs.type="text/css",c(e,t.attrs),r(t,e),e}function l(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",c(e,t.attrs),r(t,e),e}function c(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function u(t,e){var n,o,i,r;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var c=m++;n=y||(y=s(e)),o=h.bind(null,n,c,!1),i=h.bind(null,n,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(e),o=d.bind(null,n,e),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),o=p.bind(null,n),i=function(){a(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}function h(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function p(t,e){var n=e.css,o=e.media;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function d(t,e,n){var o=n.css,i=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||r)&&(o=_(o)),i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([o],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var f={},g=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),v=function(t){var e={};return function(n){if(void 0===e[n]){var o=t.call(this,n);if(o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[n]=o}return e[n]}}(function(t){return document.querySelector(t)}),y=null,m=0,b=[],_=n(41);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=g()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=i(t,e);return o(n,e),function(t){for(var r=[],a=0;a<n.length;a++){var s=n[a],l=f[s.id];l.refs--,r.push(l)}if(t){o(i(t,e),e)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete f[l.id]}}}};var w=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.moveCallback=null,this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.add=function(e,n){return new t(e.x+n.x,e.y+n.y)},t.subtract=function(e,n){return new t(e.x-n.x,e.y-n.y)},t.getDistanceBetween=function(e,n){return Math.sqrt(t.getDistanceBetweenSquared(e,n))},t.getDistanceBetweenSquared=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},t.getAngle=function(t,e){var n=180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI;return n<0&&(n+=360),n},t.dotProduct=function(t,e){return t.x*e.x+t.y*e.y},t.crossProduct=function(t,e){return t.x*e.y-t.y*e.x},t.epsilonEquals=function(e,n){return t.getDistanceBetween(e,n)<=.1},t.prototype.moveTo=function(t,e){if("number"==typeof t){if(void 0===e)throw new Error("x is defined, but y is not defined");return this.moveToCoordinates(t,e)}return this.moveToPoint(t)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.getDistanceTo=function(e){return t.getDistanceBetween(this,e)},t.prototype.getDistanceSquaredTo=function(e){return t.getDistanceBetweenSquared(this,e)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.moveToPoint=function(t){return this.moveToCoordinates(t.x,t.y)},t.prototype.moveToCoordinates=function(t,e){this._x=t,this._y=e,this.moveCallback&&this.moveCallback()},t}();e.Point=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),i=function(){function t(t,e,n){this.x=t,this.y=e,this.z=n}return t.fromColor=function(e){return new t(e.r/255,e.g/255,e.b/255)},t.add=function(e,n){return new t(e.x+n.x,e.y+n.y,e.z+n.z)},t.subtract=function(e,n){return new t(e.x-n.x,e.y-n.y,e.z-n.z)},t.crossProduct=function(e,n){return new t(e.y*n.z-e.z*n.y,e.z*n.x-e.x*n.z,e.x*n.y-e.y*n.x)},t.dotProduct=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},t.cosineAngle=function(e,n){return t.dotProduct(e,n)/(e.getLength()*n.getLength())},t.fromNormalMap=function(e,n,o){return new t(e/255*2-1,n/255*2-1,o/255)},t.multiplyComponents=function(e,n){return new t(e.x*n.x,e.y*n.y,e.z*n.z)},t.prototype.toColor=function(){var t=Math.floor(255*this.x),e=Math.floor(255*this.y),n=Math.floor(255*this.z);return new o.Color(t,e,n)},t.prototype.normalize=function(){var e=this.getLength();return new t(this.x/e,this.y/e,this.z/e)},t.prototype.multiply=function(e){return new t(this.x*e,this.y*e,this.z*e)},t.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.invert=function(){return new t(-this.x,-this.y,-this.z)},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},t}();e.Vector3=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={POLYGON_LAYER_NAME:"PolygonLayer",PATH_LAYER_NAME:"PathLayer",PATH_GHOST_LAYER_NAME:"PathGhostLayer",NEW_CONDITION_EVENT_NAME:"new-condition",REMOVE_CONDITION_EVENT_NAME:"remove-condition",KEY_CODE:{ESCAPE:27}};e.LEX=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Constant=0]="Constant",t[t.Moving=1]="Moving"}(e.LightType||(e.LightType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,n){this.r=t,this.g=e,this.b=n,this.fillStyle="rgb("+this.r+", "+this.g+", "+this.b+")"}return t.fromHexString=function(e){var n=e.slice(1,3),o=e.slice(3,5),i=e.slice(5,7);return new t(parseInt(n,16),parseInt(o,16),parseInt(i,16))},t.integerToPaddedHex=function(t){var e=t.toString(16);return 1===e.length?" "+e:e},t.prototype.toHexString=function(){var e=t.integerToPaddedHex(this.r),n=t.integerToPaddedHex(this.g);return"#"+(e+t.integerToPaddedHex(this.b)+n)},t}();e.Color=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),i=function(){function t(t,e){this.color=t,this.thickness=e}return t.getDefault=function(){return new t(o.COLORS.BLACK,1)},t.prototype.clone=function(){return new t(this.color,this.thickness)},t}();e.LineProperties=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(10);e.COLORS={BLACK:new o.Color(0,0,0),RED:new o.Color(255,0,0),GREEN:new o.Color(0,255,0),BLUE:new o.Color(0,0,255),WHITE:new o.Color(255,255,255)},Object.freeze(e.COLORS)},function(t,e,n){"use strict";var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),r=function(){function t(t){this.paths=[],this.name=t}return t.prototype.render=function(t){this.paths.forEach(function(e){return t.drawPath(e)})},t.prototype.removePath=function(t){var e=this.paths.indexOf(t);-1!==e&&this.paths.splice(e,1)},t.prototype.hitTest=function(t){try{for(var e=o(this.paths),n=e.next();!n.done;n=e.next()){var i=n.value,r=i.hitTest(t);if(r)return r.layer=this,r}}catch(t){a={error:t}}finally{try{n&&!n.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return null;var a,s},t.prototype.toSerializableObject=function(){return{name:this.name,paths:this.paths.map(function(t){return t.toSerializableObject()})}},t.prototype.fromSerializableObject=function(t){var e=this;this.name=t.name,this.paths.splice(0,this.paths.length),t.paths.forEach(function(t){e.paths.push(i.Path.fromSerializablePath(t))})},t}();e.Layer=r},function(t,e,n){"use strict";var o=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(46),l=n(15),c=n(11),u=n(6),h=n(0),p=function(){function t(t,e){this.closed=!1,this.vertices=t,this.lineProperties=e}return t.fromSerializablePath=function(e){var n=e.vertices.map(function(t){return new u.Point(t.x,t.y)}),o=new c.LineProperties(e.lineProperties.color,e.lineProperties.thickness),i=new t(n,o);return i.closed=e.closed,i},t.prototype.getVerticesIterator=function(){var t,e;return o(this,function(n){switch(n.label){case 0:t=this.vertices.length,e=0,n.label=1;case 1:return e<t?[4,this.vertices[e]]:[3,4];case 2:n.sent(),n.label=3;case 3:return e+=1,[3,1];case 4:return this.closed&&t>0?[4,this.vertices[0]]:[3,6];case 5:n.sent(),n.label=6;case 6:return[2]}})},t.prototype.getLineIterator=function(){var t,e,n,r,a,s,c;return o(this,function(o){switch(o.label){case 0:o.trys.push([0,5,6,7]),e=i(this.getVerticesIterator()),n=e.next(),o.label=1;case 1:return n.done?[3,4]:(r=n.value,t?[4,new l.Line(t,r)]:(t=r,[3,3]));case 2:o.sent(),t=r,o.label=3;case 3:return n=e.next(),[3,1];case 4:return[3,7];case 5:return a=o.sent(),s={error:a},[3,7];case 6:try{n&&!n.done&&(c=e.return)&&c.call(e)}finally{if(s)throw s.error}return[7];case 7:return[2]}})},t.prototype.getStartingPoint=function(){return this.vertices[0]},t.prototype.getVerticesCount=function(){return this.vertices.length},t.prototype.getLineProperties=function(){return this.lineProperties},t.prototype.hitTest=function(t){try{for(var e=i(this.getLineIterator()),n=e.next();!n.done;n=e.next()){var o=n.value;if(o.distanceToPoint(t)<=h.configuration.hitTolerance)return new s.HitTestResult(o,this)}}catch(t){r={error:t}}finally{try{n&&!n.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return null;var r,a},t.prototype.getVertex=function(t){return this.vertices[t]},t.prototype.getVertices=function(){return this.vertices},t.prototype.addVertex=function(t){this.vertices.push(t)},t.prototype.removeVertex=function(t){var e=this.findPointIndex(t);-1!==e&&this.vertices.splice(e,1)},t.prototype.insertVertex=function(t,e){this.vertices.splice(e,0,t)},t.prototype.clone=function(){return new t(a(this.getVertices().map(function(t){return t.clone()})),this.lineProperties.clone())},t.prototype.findPointIndex=function(t){return this.vertices.indexOf(t)},t.prototype.getBoundingBox=function(){var t=1/0,e=0,n=1/0,o=0;return this.vertices.forEach(function(i){i.x<t&&(t=i.x),i.x>e&&(e=i.x),i.y<n&&(n=i.y),i.y>o&&(o=i.y)}),{minX:t,maxX:e,minY:n,maxY:o}},t.prototype.isPointInBoundingBox=function(t){var e=this.getBoundingBox();return t.x>=e.minX&&t.x<=e.maxX&&t.y>=e.minY&&t.y<=e.maxY},t.prototype.toSerializableObject=function(){return{lineProperties:this.lineProperties.clone(),closed:this.closed,vertices:this.vertices.map(function(t){return{x:t.x,y:t.y}})}},t.prototype.getNextPointIndex=function(t){return(t+1)%this.getVerticesCount()},t.prototype.getNextPoint=function(t){var e=this.vertices.indexOf(t),n=this.getNextPointIndex(e);return this.getVertex(n)},t.prototype.getPreviousPointIndex=function(t){var e=t-1;return e<0&&(e=this.getVerticesCount()-1),e},t.prototype.getPreviousPoint=function(t){var e=this.vertices.indexOf(t),n=this.getPreviousPointIndex(e);return this.getVertex(n)},t.prototype.moveTo=function(t){if(this.getVerticesCount()!==t.getVerticesCount())throw new Error("The number of vertices does not match");if(this.closed!==t.closed)throw new Error("Path's closed state does not match");this.vertices.forEach(function(e,n){return e.moveTo(t.getVertex(n))})},t.prototype.getCenterOfGravity=function(){var t=0,e=0;return this.getVertices().forEach(function(n){t+=n.x,e+=n.y}),t/=this.getVerticesCount(),e/=this.getVerticesCount(),new u.Point(t,e)},t.prototype.getBoundingBoxCenter=function(){var t=this.getBoundingBox(),e=(t.maxX+t.minX)/2,n=(t.maxY+t.minY)/2;return new u.Point(e,n)},t}();e.Path=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),i=function(){function t(t,e){if(t.equals(e))throw new Error("Cannot create line between points at the same coordinates");this.p1=t,this.p2=e}return t.prototype.distanceToPoint=function(t){var e=this.projectPoint(t);return o.Point.getDistanceBetween(t,e)},t.prototype.projectPoint=function(t){var e=this.p1,n=this.p2,i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/o.Point.getDistanceBetweenSquared(e,n);return i=Math.max(0,Math.min(1,i)),new o.Point(e.x+i*(n.x-e.x),e.y+i*(n.y-e.y))},t.prototype.equals=function(t){return this.p1.equals(t.p1)&&this.p2.equals(t.p2)||this.p1.equals(t.p2)&&this.p2.equals(t.p1)},t.prototype.getMiddlePoint=function(){return new o.Point((this.p1.x+this.p2.x)/2,(this.p1.y+this.p2.y)/2)},t.prototype.getLength=function(){return o.Point.getDistanceBetween(this.p1,this.p2)},t.prototype.getDirection=function(t){var e=o.Point.crossProduct(o.Point.subtract(this.p2,this.p1),o.Point.subtract(t,this.p1));return Math.abs(e)<1e-4?0:e>0?1:-1},t}();e.Line=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return"NewBackgroundTexture"},enumerable:!0,configurable:!0}),t}();e.NewBackgroundTextureEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return t.name},enumerable:!0,configurable:!0}),t}();e.NewHeightMapEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return t.name},enumerable:!0,configurable:!0}),t}();e.NewHeightMapIntensityEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return t.name},enumerable:!0,configurable:!0}),t}();e.NewLightColorEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return t.name},enumerable:!0,configurable:!0}),t}();e.NewLightPositionEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return t.name},enumerable:!0,configurable:!0}),t}();e.NewLightPositionRadiusEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return t.name},enumerable:!0,configurable:!0}),t}();e.NewLightTypeEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return t.name},enumerable:!0,configurable:!0}),t}();e.NewNormalMapEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.CanvasInfo=0]="CanvasInfo",t[t.NewFillDataEvent=1]="NewFillDataEvent",t[t.StartFill=2]="StartFill",t[t.FillStrips=3]="FillStrips",t[t.EndFill=4]="EndFill"}(e.FillWorkerMessageType||(e.FillWorkerMessageType={}))},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),a=n(0),s=function(t){function e(n,o){var i,a=this;if(n instanceof r.Path){var s=n;i=s.getVertices(),o=s.lineProperties}else i=n,o=o;return e.ensureVerticesLength(i),a=t.call(this,i,o)||this,a.closed=!0,a}return o(e,t),e.ensureVerticesLength=function(t){if(!(t.length>=a.configuration.minPolygonPoints))throw new Error("Polygon must have at least "+a.configuration.minPolygonPoints+" vertices")},e.prototype.clone=function(){return new e(t.prototype.clone.call(this))},e.prototype.removeVertex=function(e){if(this.getVerticesCount()===a.configuration.minPolygonPoints)throw new Error("Cannot delete vertex");t.prototype.removeVertex.call(this,e)},e.prototype.isConvex=function(){var t=null,e=null;try{for(var n=i(this.getLineIterator()),o=n.next();!o.done;o=n.next()){var r=o.value;if(t){var a=t.getDirection(r.p2);if(t=r,null!==e||0===a){if(0!==a&&a!==e)return!1}else e=a}else t=r}}catch(t){s={error:t}}finally{try{o&&!o.done&&(l=n.return)&&l.call(n)}finally{if(s)throw s.error}}return!0;var s,l},e}(r.Path);e.Polygon=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0}),n(60);var i={DIALOG_BOX:"dialog-box",DIALOG:"image-select-dialog",HEADER:"image-select-dialog__header",HEADING:"image-select-dialog__heading",BLOCK:"image-select-dialog__block",BLOCK_TITLE:"image-select-dialog__block-title",PRESET_IMAGES_CONTAINER:"image-select-dialog__preset-images-container",SELECTED_IMAGE:"image-select-dialog__image--selected",CUSTOM_IMAGE:"image-select-dialog__custom-image",BOTTOM_BUTTONS:"image-select-dialog__bottom-buttons"},r=function(t){function e(e,n){var o=t.call(this)||this;return o._wasCancelled=!1,o._presetImageUrls=e,o.initialCustomColorHex=n,o.classList.add(i.DIALOG_BOX),o.classList.add(i.DIALOG),o.onSelectableImageClick=o.onSelectableImageClick.bind(o),o.showCustomImage=o.showCustomImage.bind(o),o.onCancelButtonClick=o.onCancelButtonClick.bind(o),o.onConfirmButtonClick=o.onConfirmButtonClick.bind(o),o.onCustomColorInputChange=o.onCustomColorInputChange.bind(o),o.createHeader(),o.createPresetImagesList(),o.createCustomImagePicker(),o.createCustomColorPicker(),o.createBottomButtons(),o}return o(e,t),Object.defineProperty(e,"observedAttributes",{get:function(){return["name"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getAttribute("name")||"Image select"},set:function(t){this.setAttribute("name",t),this.heading.innerText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wasCancelled",{get:function(){return this._wasCancelled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"presetImageUrls",{get:function(){return this._presetImageUrls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedImage",{get:function(){return this._selectedImage},enumerable:!0,configurable:!0}),e.prototype.connectedCallback=function(){var t=this;this._wasCancelled=!0,this.cancelButton.addEventListener("click",this.onCancelButtonClick),this.confirmButton.addEventListener("click",this.onConfirmButtonClick),this.customFileInput.addEventListener("change",this.showCustomImage),this.customImage.addEventListener("click",this.onSelectableImageClick),this.customColorInput.addEventListener("change",this.onCustomColorInputChange),this.customColorImage.addEventListener("click",this.onSelectableImageClick),this.presetImagesListContainer.querySelectorAll("img").forEach(function(e){return e.addEventListener("click",t.onSelectableImageClick)})},e.prototype.disconnectedCallback=function(){var t=this;this.presetImagesListContainer.querySelectorAll("img").forEach(function(e){return e.removeEventListener("click",t.onSelectableImageClick)}),this.customFileInput.removeEventListener("change",this.showCustomImage),this.customImage.removeEventListener("click",this.onSelectableImageClick),this.customColorInput.removeEventListener("change",this.onCustomColorInputChange),this.customColorImage.removeEventListener("click",this.onSelectableImageClick),this.cancelButton.removeEventListener("click",this.onCancelButtonClick),this.confirmButton.removeEventListener("click",this.onConfirmButtonClick)},e.prototype.canClose=function(){return!0},e.prototype.close=function(){this.dispatchEvent(new CustomEvent("close"))},e.prototype.createHeader=function(){var t=this.createBlock();t.classList.add(i.HEADER),this.appendChild(t),this.heading=document.createElement("h2"),this.heading.classList.add(i.HEADING),this.heading.innerText=this.name,t.appendChild(this.heading)},e.prototype.createPresetImagesList=function(){var t=this,e=this.createBlock(),n=this.createBlockTitle("Choose preset image");e.appendChild(n);var o=document.createElement("div");o.classList.add(i.PRESET_IMAGES_CONTAINER),e.appendChild(o),this.presetImageUrls.map(function(e){return t.createSelectableImage(e)}).forEach(function(t){return o.appendChild(t)}),this.presetImagesListContainer=e,this.appendChild(this.presetImagesListContainer),this.selectImage(this.presetImagesListContainer.querySelector("img"))},e.prototype.createCustomImagePicker=function(){var t=this.createBlock();this.appendChild(t);var e=this.createBlockTitle("Select custom image");t.appendChild(e),this.customFileInput=document.createElement("input"),this.customFileInput.type="file",this.customFileInput.accept="image/*",t.appendChild(this.customFileInput),this.customImage=document.createElement("img"),this.customImage.classList.add(i.CUSTOM_IMAGE),t.appendChild(this.customImage)},e.prototype.showCustomImage=function(){var t=this;if(this.customFileInput.files&&this.customFileInput.files[0]){var e=new FileReader;e.onload=function(e){t.customImage.src=e.target.result,t.selectImage(t.customImage)},e.readAsDataURL(this.customFileInput.files[0])}},e.prototype.createCustomColorPicker=function(){var t=this.createBlock();this.appendChild(t);var e=this.createBlockTitle("Custom solid color");t.appendChild(e),this.customColorInput=document.createElement("input"),this.customColorInput.type="color",this.customColorInput.value=this.initialCustomColorHex,t.appendChild(this.customColorInput),this.customColorImage=new Image(20,20),t.appendChild(this.customColorImage),this.setCustomColorImageColor()},e.prototype.onCustomColorInputChange=function(){this.setCustomColorImageColor(),this.selectImage(this.customColorImage)},e.prototype.setCustomColorImageColor=function(){var t=document.createElement("canvas");t.width=this.customColorImage.width,t.height=this.customColorImage.height;var e=t.getContext("2d");if(!e)throw new Error("Cannot get canvas drawing context");e.fillStyle=this.customColorInput.value,e.fillRect(0,0,t.width,t.height),this.customColorImage.src=t.toDataURL()},e.prototype.createBottomButtons=function(){var t=document.createElement("div");t.classList.add(i.BOTTOM_BUTTONS),this.appendChild(t),this.cancelButton=document.createElement("button"),this.cancelButton.innerText="Cancel",this.confirmButton=document.createElement("button"),this.confirmButton.innerText="Confirm",t.appendChild(this.cancelButton),t.appendChild(this.confirmButton)},e.prototype.onCancelButtonClick=function(){this.close()},e.prototype.onConfirmButtonClick=function(){this._wasCancelled=!1,this.close()},e.prototype.createBlock=function(){var t=document.createElement("div");return t.classList.add(i.BLOCK),t},e.prototype.createBlockTitle=function(t){var e=document.createElement("h3");return e.classList.add(i.BLOCK_TITLE),e.innerText=t,e},e.prototype.createSelectableImage=function(t){var e=document.createElement("div"),n=new Image;return n.src=t,e.appendChild(n),e},e.prototype.onSelectableImageClick=function(t){this.selectImage(t.target)},e.prototype.selectImage=function(t){t!==this._selectedImage&&(this._selectedImage&&this._selectedImage.classList.remove(i.SELECTED_IMAGE),t.classList.add(i.SELECTED_IMAGE),this._selectedImage=t)},e}(HTMLElement);e.ImageSelectDialog=r,customElements.define("app-image-select-dialog",r)},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(31),r=function(t){function e(e){var n=t.call(this,{dialogOverlay:e.dialogOverlay})||this;return n.eventAggregator=e.eventAggregator,n.imageDownloader=e.imageDownloader,n.button.innerText="Select image",n}return o(e,t),e.prototype.getSelectedImageData=function(){var t=this.dialogBox.selectedImage;return this.imageDownloader.imageToImageData(t)},e}(i.DialogBoxButton);e.ImageSelectDialogButton=r,customElements.define("app-image-select-dialog-button",r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return"PointClickEvent"},enumerable:!0,configurable:!0}),t}();e.PointClickEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.payload=null,this.eventType=t.eventType,this.handled=!1}return Object.defineProperty(t,"eventType",{get:function(){return t.name},enumerable:!0,configurable:!0}),t}();e.LoadingFinishedEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.payload=null,this.eventType=t.eventType,this.handled=!1}return Object.defineProperty(t,"eventType",{get:function(){return t.name},enumerable:!0,configurable:!0}),t}();e.LoadingStartedEvent=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this)||this;if(n.dialogOverlay=e.dialogOverlay,n.button=document.createElement("button"),n.button.innerText="Open dialog box",n.appendChild(n.button),n.openDialogBox=n.openDialogBox.bind(n),n.onDialogBoxClosed=n.onDialogBoxClosed.bind(n),n.setupDialogBox(),!n.dialogBox)throw new Error("Dialog box is undefined");return n}return o(e,t),e.prototype.connectedCallback=function(){this.button.addEventListener("click",this.openDialogBox)},e.prototype.disconnectedCallback=function(){this.button.removeEventListener("click",this.openDialogBox),this.dialogBox.removeEventListener("close",this.onDialogBoxClosed),this.dialogBox.close()},e.prototype.openDialogBox=function(){this.dialogOverlay.showDialog(this.dialogBox),this.dialogBox.addEventListener("close",this.onDialogBoxClosed)},e}(HTMLElement);e.DialogBoxButton=i,customElements.define("app-dialog-box-button",i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.payload=null,this.eventType=t.eventType,this.handled=!1}return Object.defineProperty(t,"eventType",{get:function(){return t.name},enumerable:!0,configurable:!0}),t}();e.RenderFinishedEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return"FinishPointDragEvent"},enumerable:!0,configurable:!0}),t}();e.FinishPointDragEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,n){this.eventType=t.eventType,this.handled=!1,this.payload={element:e,newPosition:n}}return Object.defineProperty(t,"eventType",{get:function(){return"PointDragEvent"},enumerable:!0,configurable:!0}),t}();e.PointDragEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){this.eventType=t.eventType,this.handled=!1,this.payload=e}return Object.defineProperty(t,"eventType",{get:function(){return"StartPointDragEvent"},enumerable:!0,configurable:!0}),t}();e.StartPointDragEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,n,o){this.eventType=t.eventType,this.handled=!1,this.payload={line:e,path:n,position:o}}return Object.defineProperty(t,"eventType",{get:function(){return"LineClickEvent"},enumerable:!0,configurable:!0}),t}();e.LineClickEvent=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0}),n(94);var i=function(t){function e(){var e=t.call(this)||this;e.className="instructions-dialog dialog-box";var n=document.createElement("h1");return n.textContent="Instructions",n.className="instructions-dialog__title",e.appendChild(n),e.createUsageList(),e.dismissButton=document.createElement("button"),e.dismissButton.textContent="Dismiss",e.appendChild(e.dismissButton),e.close=e.close.bind(e),e}return o(e,t),e.prototype.connectedCallback=function(){this.dismissButton.addEventListener("click",this.close)},e.prototype.disconnectedCallback=function(){this.dismissButton.removeEventListener("click",this.close)},e.prototype.close=function(){this.dispatchEvent(new CustomEvent("close"))},e.prototype.canClose=function(){return!0},e.prototype.createUsageList=function(){var t=this,e=document.createElement("ul");["Click on the free space in the canvas to start creating vertices","Click on the initial vertex to close the path into a polygon","Alternatively, you may press Escape to cancel adding a new path","Click and drag the vertex to move it","Double click on an edge to add a vertex in the middle of it","Double click on a vertex to remove it","Pressing Ctrl allows dragging a whole polygon","Shift + click to clip the polygons using Sutherland-Hodgman's algorithm","Save allows you to export all the polygons on the screen","Load allows you to restore the polygons"].map(function(e){return t.createUsageListItem(e)}).forEach(function(t){return e.appendChild(t)}),this.appendChild(e)},e.prototype.createUsageListItem=function(t){var e=document.createElement("li");return e.textContent=t,e},e}(HTMLElement);e.InstructionsDialog=i,window.customElements.define("app-instructions-dialog",i)},function(t,e,n){"use strict";function o(){var t=document.getElementById("main-canvas");if(!t)throw new Error("Canvas with id main-canvas cannot be found");new i.Application(t).init()}Object.defineProperty(e,"__esModule",{value:!0}),n(39),n(42),n(43);var i=n(45);window.onload=o},function(t,e,n){var o=n(40);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(5)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(4)(void 0),e.push([t.i,"body,html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}body{line-height:1.5}.main-canvas{border:1px solid #000}.main-container{width:100%;padding:0 1em}.canvas-wrapper{width:100%;position:relative}.application-ui{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.application-ui *{pointer-events:all}.app-header{margin-bottom:1em;margin-left:1em}.app-name{margin:0}.footer{margin:1em}",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var r;return r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"})}},function(t,e){},function(t,e,n){(function(t){(function(){"use strict";function e(){e=function(){},Re.Symbol||(Re.Symbol=He)}function n(){e();var t=Re.Symbol.iterator;t||(t=Re.Symbol.iterator=Re.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&Fe(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return o(this)}}),n=function(){}}function o(t){var e=0;return i(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})}function i(t){return n(),t={next:t},t[Re.Symbol.iterator]=function(){return this},t}function r(t){n();var e=t[Symbol.iterator];return e?e.call(t):o(t)}function a(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function s(t){return t.__shady&&void 0!==t.__shady.firstChild}function l(t){return"ShadyRoot"===t.sa}function c(t){if(t=t.getRootNode(),l(t))return t}function u(t,e){if(t&&e)for(var n,o=Object.getOwnPropertyNames(e),i=0;i<o.length&&(n=o[i]);i++){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}}function h(t,e){for(var n=[],o=1;o<arguments.length;++o)n[o-1]=arguments[o];for(o=0;o<n.length;o++)u(t,n[o]);return t}function p(t,e){for(var n in e)t[n]=e[n]}function d(t){Xe.push(t),qe.textContent=We++}function f(t,e){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(t){Ye||(Ye=!0,d(v)),$e.push(t)}function v(){Ye=!1;for(var t=!!$e.length;$e.length;)$e.shift()();return t}function y(){this.a=!1,this.addedNodes=[],this.removedNodes=[],this.N=new Set}function m(t){t.a||(t.a=!0,d(function(){b(t)}))}function b(t){if(t.a){t.a=!1;var e=t.takeRecords();e.length&&t.N.forEach(function(t){t(e)})}}function _(t,e){t.__shady=t.__shady||{},t.__shady.H||(t.__shady.H=new y),t.__shady.H.N.add(e);var n=t.__shady.H;return{wa:e,w:n,ya:t,takeRecords:function(){return n.takeRecords()}}}function w(t){var e=t&&t.w;e&&(e.N.delete(t.wa),e.N.size||(t.ya.__shady.H=null))}function E(t,e){var n=e.getRootNode();return t.map(function(t){var e=n===t.target.getRootNode();if(e&&t.addedNodes){if(e=Array.from(t.addedNodes).filter(function(t){return n===t.getRootNode()}),e.length)return t=Object.create(t),Object.defineProperty(t,"addedNodes",{value:e,configurable:!0}),t}else if(e)return t}).filter(function(t){return t})}function C(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"Â ":return"&nbsp;"}}function P(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e}function x(t,e){"template"===t.localName&&(t=t.content);for(var n,o="",i=e?e(t):t.childNodes,r=0,a=i.length;r<a&&(n=i[r]);r++){t:{var s=n,l=t,c=e;switch(s.nodeType){case Node.ELEMENT_NODE:for(var u=s.localName,h="<"+u,p=s.attributes,d=0;l=p[d];d++)h+=" "+l.name+'="'+l.value.replace(dn,C)+'"';h+=">",s=gn[u]?h:h+x(s,c)+"</"+u+">";break t;case Node.TEXT_NODE:s=s.data,s=l&&vn[l.localName]?s:s.replace(fn,C);break t;case Node.COMMENT_NODE:s="\x3c!--"+s.data+"--\x3e";break t;default:throw window.console.error(s),Error("not implemented")}}o+=s}return o}function L(t){var e=[];for(mn.currentNode=t,t=mn.firstChild();t;)e.push(t),t=mn.nextSibling();return e}function S(t,e,n){for(var o in e){var i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable||!i&&n?Object.defineProperty(t,o,e[o]):n&&console.warn("Could not define",o,"on",t)}}function T(t){S(t,Cn),S(t,Pn),S(t,Ln)}function O(t,e,n){Sn(t),n=n||null,t.__shady=t.__shady||{},e.__shady=e.__shady||{},n&&(n.__shady=n.__shady||{}),t.__shady.previousSibling=n?n.__shady.previousSibling:e.lastChild;var o=t.__shady.previousSibling;o&&o.__shady&&(o.__shady.nextSibling=t),(o=t.__shady.nextSibling=n)&&o.__shady&&(o.__shady.previousSibling=t),t.__shady.parentNode=e,n?n===e.__shady.firstChild&&(e.__shady.firstChild=t):(e.__shady.lastChild=t,e.__shady.firstChild||(e.__shady.firstChild=t)),e.__shady.childNodes=null}function N(t){if(!t.__shady||void 0===t.__shady.firstChild){t.__shady=t.__shady||{},t.__shady.firstChild=yn.firstChild(t),t.__shady.lastChild=yn.lastChild(t),Tn(t);for(var e,n=t.__shady.childNodes=yn.childNodes(t),o=0;o<n.length&&(e=n[o]);o++)e.__shady=e.__shady||{},e.__shady.parentNode=t,e.__shady.nextSibling=n[o+1]||null,e.__shady.previousSibling=n[o-1]||null,Sn(e)}}function A(t,e,n){if(e===t)throw Error("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");if(n){var o=n.__shady&&n.__shady.parentNode;if(void 0!==o&&o!==t||void 0===o&&yn.parentNode(n)!==t)throw Error("Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.")}if(n===e)return e;e.parentNode&&k(e.parentNode,e),o=c(t);var i;if(i=o)t:{if(!e.__noInsertionPoint){var u;if("slot"===e.localName?u=[e]:e.querySelectorAll&&(u=e.querySelectorAll("slot")),u&&u.length){i=u;break t}}i=void 0}if((u=i)&&o.C.push.apply(o.C,[].concat(u instanceof Array?u:a(r(u)))),o&&("slot"===t.localName||u)&&nt(o),s(t)){if(o=n,Tn(t),t.__shady=t.__shady||{},void 0!==t.__shady.firstChild&&(t.__shady.childNodes=null),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(u=e.childNodes,i=0;i<u.length;i++)O(u[i],t,o);e.__shady=e.__shady||{},o=void 0!==e.__shady.firstChild?null:void 0,e.__shady.firstChild=e.__shady.lastChild=o,e.__shady.childNodes=o}else O(e,t,o);if(I(t)){nt(t.__shady.root);var h=!0}else t.__shady.root&&(h=!0)}return h||(h=l(t)?t.host:t,n?(n=D(n),Qe.insertBefore.call(h,e,n)):Qe.appendChild.call(h,e)),j(t,e),e}function k(t,e){if(e.parentNode!==t)throw Error("The node to be removed is not a child of this node: "+e);var n=c(e);if(s(t)){e.__shady=e.__shady||{},t.__shady=t.__shady||{},e===t.__shady.firstChild&&(t.__shady.firstChild=e.__shady.nextSibling),e===t.__shady.lastChild&&(t.__shady.lastChild=e.__shady.previousSibling);var o=e.__shady.previousSibling,i=e.__shady.nextSibling;if(o&&(o.__shady=o.__shady||{},o.__shady.nextSibling=i),i&&(i.__shady=i.__shady||{},i.__shady.previousSibling=o),e.__shady.parentNode=e.__shady.previousSibling=e.__shady.nextSibling=void 0,void 0!==t.__shady.childNodes&&(t.__shady.childNodes=null),I(t)){nt(t.__shady.root);var r=!0}}if(M(e),n){(o=t&&"slot"===t.localName)&&(r=!0),st(n),i=n.i;for(var a in i)for(var u=i[a],h=0;h<u.length;h++){var p=u[h];if(f(e,p)){u.splice(h,1);var d=n.m.indexOf(p);if(0<=d&&n.m.splice(d,1),h--,d=p.__shady.D)for(p=0;p<d.length;p++){var g=d[p],v=yn.parentNode(g);v&&Qe.removeChild.call(v,g)}d=!0}}(d||o)&&nt(n)}return r||(r=l(t)?t.host:t,(!t.__shady.root&&"slot"!==e.localName||r===yn.parentNode(e))&&Qe.removeChild.call(r,e)),j(t,null,e),e}function M(t){if(t.__shady&&void 0!==t.__shady.ca)for(var e,n=t.childNodes,o=0,i=n.length;o<i&&(e=n[o]);o++)M(e);t.__shady&&(t.__shady.ca=void 0)}function D(t){var e=t;return t&&"slot"===t.localName&&(e=(e=t.__shady&&t.__shady.D)&&e.length?e[0]:D(t.nextSibling)),e}function I(t){return(t=t&&t.__shady&&t.__shady.root)&&ht(t)}function B(t,e){if("slot"===e)t=t.parentNode,I(t)&&nt(t.__shady.root);else if("slot"===t.localName&&"name"===e&&(e=c(t))){var n=t.ua,o=lt(t);if(o!==n){n=e.i[n];var i=n.indexOf(t);0<=i&&n.splice(i,1),n=e.i[o]||(e.i[o]=[]),n.push(t),1<n.length&&(e.i[o]=ct(n))}nt(e)}}function j(t,e,n){(t=t.__shady&&t.__shady.H)&&(e&&t.addedNodes.push(e),n&&t.removedNodes.push(n),m(t))}function R(t){if(t&&t.nodeType){t.__shady=t.__shady||{};var e=t.__shady.ca;return void 0===e&&(e=l(t)?t:(e=t.parentNode)?R(e):t,Qe.contains.call(document.documentElement,t)&&(t.__shady.ca=e)),e}}function F(t,e,n){var o=[];return H(t.childNodes,e,n,o),o}function H(t,e,n,o){for(var i,r=0,a=t.length;r<a&&(i=t[r]);r++){var s;if(s=i.nodeType===Node.ELEMENT_NODE){s=i;var l=e,c=n,u=o,h=l(s);h&&u.push(s),c&&c(h)?s=h:(H(s.childNodes,l,c,u),s=void 0)}if(s)break}}function V(t,e,n){On||(On=window.ShadyCSS&&window.ShadyCSS.ScopingShim),On&&"class"===e?On.setElementClass(t,n):(Qe.setAttribute.call(t,e,n),B(t,e))}function U(t,e){if(t.ownerDocument!==document)return Qe.importNode.call(document,t,e);var n=Qe.importNode.call(document,t,!1);if(e){t=t.childNodes,e=0;for(var o;e<t.length;e++)o=U(t[e],!0),n.appendChild(o)}return n}function z(t,e){var n=[],o=t;for(t=t===window?window:t.getRootNode();o;)n.push(o),o=o.assignedSlot?o.assignedSlot:o.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&o.host&&(e||o!==t)?o.host:o.parentNode;return n[n.length-1]===document&&n.push(window),n}function G(t,e){if(!l)return t;t=z(t,!0);for(var n,o,i,r,a=0;a<e.length;a++)if(n=e[a],i=n===window?window:n.getRootNode(),i!==o&&(r=t.indexOf(i),o=i),!l(i)||-1<r)return n}function q(t){function e(e,n){return e=new t(e,n),e.S=n&&!!n.composed,e}return p(e,t),e.prototype=t.prototype,e}function W(t,e,n){if(n=e.__handlers&&e.__handlers[t.type]&&e.__handlers[t.type][n])for(var o,i=0;(o=n[i])&&t.target!==t.relatedTarget&&(o.call(e,t),!t.qa);i++);}function X(t){var e=t.composedPath();Object.defineProperty(t,"currentTarget",{get:function(){return o},configurable:!0});for(var n=e.length-1;0<=n;n--){var o=e[n];if(W(t,o,"capture"),t.T)return}Object.defineProperty(t,"eventPhase",{get:function(){return Event.AT_TARGET}});var i;for(n=0;n<e.length;n++){o=e[n];var r=o.__shady&&o.__shady.root;if((0===n||r&&r===i)&&(W(t,o,"bubble"),o!==window&&(i=o.getRootNode()),t.T))break}}function Y(t,e,n,o,i,r){for(var a=0;a<t.length;a++){var s=t[a],l=s.type,c=s.capture,u=s.once,h=s.passive;if(e===s.node&&n===l&&o===c&&i===u&&r===h)return a}return-1}function K(t,e,n){if(e){if("object"==typeof n)var o=!!n.capture,i=!!n.once,r=!!n.passive;else o=!!n,r=i=!1;var a=n&&n.U||this,s=e[Nn];if(s){if(-1<Y(s,a,t,o,i,r))return}else e[Nn]=[];s=function(o){if(i&&this.removeEventListener(t,e,n),o.__target||Q(o),a!==this){var r=Object.getOwnPropertyDescriptor(o,"currentTarget");Object.defineProperty(o,"currentTarget",{get:function(){return a},configurable:!0})}if(o.composed||-1<o.composedPath().indexOf(a))if(o.target===o.relatedTarget)o.eventPhase===Event.BUBBLING_PHASE&&o.stopImmediatePropagation();else if(o.eventPhase===Event.CAPTURING_PHASE||o.bubbles||o.target===a){var s="object"==typeof e&&e.handleEvent?e.handleEvent(o):e.call(a,o);return a!==this&&(r?(Object.defineProperty(o,"currentTarget",r),r=null):delete o.currentTarget),s}},e[Nn].push({node:this,type:t,capture:o,once:i,passive:r,Va:s}),Mn[t]?(this.__handlers=this.__handlers||{},this.__handlers[t]=this.__handlers[t]||{capture:[],bubble:[]},this.__handlers[t][o?"capture":"bubble"].push(s)):(this instanceof Window?Qe.Ta:Qe.addEventListener).call(this,t,s,n)}}function $(t,e,n){if(e){if("object"==typeof n)var o=!!n.capture,i=!!n.once,r=!!n.passive;else o=!!n,r=i=!1;var a=n&&n.U||this,s=void 0,l=null;try{l=e[Nn]}catch(t){}l&&-1<(i=Y(l,a,t,o,i,r))&&(s=l.splice(i,1)[0].Va,l.length||(e[Nn]=void 0)),(this instanceof Window?Qe.Ua:Qe.removeEventListener).call(this,t,s||e,n),s&&Mn[t]&&this.__handlers&&this.__handlers[t]&&(t=this.__handlers[t][o?"capture":"bubble"],-1<(s=t.indexOf(s))&&t.splice(s,1))}}function Q(t){if(t.__target=t.target,t.ga=t.relatedTarget,Ve.G){var e=Object.getPrototypeOf(t);if(!e.hasOwnProperty("__patchProto")){var n=Object.create(e);n.Xa=e,u(n,kn),e.__patchProto=n}t.__proto__=e.__patchProto}else u(t,kn)}function J(t,e){return{index:t,I:[],M:e}}function Z(t,e,n,o){var i=0,r=0,a=0,s=0,l=Math.min(e-i,o-r);if(0==i&&0==r)t:{for(a=0;a<l;a++)if(t[a]!==n[a])break t;a=l}if(e==t.length&&o==n.length){s=t.length;for(var c=n.length,u=0;u<l-a&&tt(t[--s],n[--c]);)u++;s=u}if(i+=a,r+=a,e-=s,o-=s,0==e-i&&0==o-r)return[];if(i==e){for(e=J(i,0);r<o;)e.I.push(n[r++]);return[e]}if(r==o)return[J(i,e-i)];for(l=i,a=r,o=o-a+1,s=e-l+1,e=Array(o),c=0;c<o;c++)e[c]=Array(s),e[c][0]=c;for(c=0;c<s;c++)e[0][c]=c;for(c=1;c<o;c++)for(u=1;u<s;u++)if(t[l+u-1]===n[a+c-1])e[c][u]=e[c-1][u-1];else{var h=e[c-1][u]+1,p=e[c][u-1]+1;e[c][u]=h<p?h:p}for(l=e.length-1,a=e[0].length-1,o=e[l][a],t=[];0<l||0<a;)0==l?(t.push(2),a--):0==a?(t.push(3),l--):(s=e[l-1][a-1],c=e[l-1][a],u=e[l][a-1],h=c<u?c<s?c:s:u<s?u:s,h==s?(s==o?t.push(0):(t.push(1),o=s),l--,a--):h==c?(t.push(3),l--,o=c):(t.push(2),a--,o=u));for(t.reverse(),e=void 0,l=[],a=0;a<t.length;a++)switch(t[a]){case 0:e&&(l.push(e),e=void 0),i++,r++;break;case 1:e||(e=J(i,0)),e.M++,i++,e.I.push(n[r]),r++;break;case 2:e||(e=J(i,0)),e.M++,i++;break;case 3:e||(e=J(i,0)),e.I.push(n[r]),r++}return e&&l.push(e),l}function tt(t,e){return t===e}function et(t,e,n){if(t!==jn)throw new TypeError("Illegal constructor");t=document.createDocumentFragment(),t.__proto__=et.prototype,t.sa="ShadyRoot",N(e),N(t),t.host=e,t.a=n&&n.mode,e.__shady=e.__shady||{},e.__shady.root=t,e.__shady.Ma="closed"!==t.a?t:null,t.L=!1,t.m=[],t.i={},t.C=[],n=yn.childNodes(e);for(var o=0,i=n.length;o<i;o++)Qe.removeChild.call(e,n[o]);return t}function nt(t){t.L||(t.L=!0,g(function(){return ot(t)}))}function ot(t){for(var e;t;){t.L&&(e=t);t:{var n=t;if(t=n.host.getRootNode(),l(t))for(var o=n.host.childNodes,i=0;i<o.length;i++)if(n=o[i],"slot"==n.localName)break t;t=void 0}}e&&e._renderRoot()}function it(t,e,n){e.__shady=e.__shady||{};var o=e.__shady.Z;e.__shady.Z=null,n||(n=(t=t.i[e.slot||"__catchall"])&&t[0]),n?(n.__shady.assignedNodes.push(e),e.__shady.assignedSlot=n):e.__shady.assignedSlot=void 0,o!==e.__shady.assignedSlot&&e.__shady.assignedSlot&&(e.__shady.assignedSlot.__shady.aa=!0)}function rt(t,e,n){for(var o,i=0;i<n.length&&(o=n[i]);i++)if("slot"==o.localName){var r=o.__shady.assignedNodes;r&&r.length&&rt(t,e,r)}else e.push(n[i])}function at(t,e){Qe.dispatchEvent.call(e,new Event("slotchange")),e.__shady.assignedSlot&&at(t,e.__shady.assignedSlot)}function st(t){if(t.C.length){for(var e,n=t.C,o=0;o<n.length;o++){var i=n[o];i.__shady=i.__shady||{},N(i),N(i.parentNode);var r=lt(i);t.i[r]?(e=e||{},e[r]=!0,t.i[r].push(i)):t.i[r]=[i],t.m.push(i)}if(e)for(var a in e)t.i[a]=ct(t.i[a]);t.C=[]}}function lt(t){var e=t.name||t.getAttribute("name")||"__catchall";return t.ua=e}function ct(t){return t.sort(function(t,e){t=ut(t);for(var n=ut(e),o=0;o<t.length;o++){e=t[o];var i=n[o];if(e!==i)return t=Array.from(e.parentNode.childNodes),t.indexOf(e)-t.indexOf(i)}})}function ut(t){var e=[];do{e.unshift(t)}while(t=t.parentNode);return e}function ht(t){return st(t),!!t.m.length}function pt(t){var e=t.getRootNode();return l(e)&&ot(e),t.__shady&&t.__shady.assignedSlot||null}function dt(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var i=n[o],r=Object.getOwnPropertyDescriptor(e,i);r.value?t[i]=r.value:Object.defineProperty(t,i,r)}}function ft(t){var e=$n.has(t);return t=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(t),!e&&t}function gt(t){var e=t.isConnected;if(void 0!==e)return e;for(;t&&!(t.__CE_isImportDocument||t instanceof Document);)t=t.parentNode||(window.ShadowRoot&&t instanceof ShadowRoot?t.host:void 0);return!(!t||!(t.__CE_isImportDocument||t instanceof Document))}function vt(t,e){for(;e&&e!==t&&!e.nextSibling;)e=e.parentNode;return e&&e!==t?e.nextSibling:null}function yt(t,e,n){n=void 0===n?new Set:n;for(var o=t;o;){if(o.nodeType===Node.ELEMENT_NODE){var i=o;e(i);var r=i.localName;if("link"===r&&"import"===i.getAttribute("rel")){if((o=i.import)instanceof Node&&!n.has(o))for(n.add(o),o=o.firstChild;o;o=o.nextSibling)yt(o,e,n);o=vt(t,i);continue}if("template"===r){o=vt(t,i);continue}if(i=i.__CE_shadowRoot)for(i=i.firstChild;i;i=i.nextSibling)yt(i,e,n)}o=o.firstChild?o.firstChild:vt(t,o)}}function mt(t,e,n){t[e]=n}function bt(){this.a=new Map,this.l=new Map,this.f=[],this.c=!1}function _t(t,e,n){t.a.set(e,n),t.l.set(n.constructor,n)}function wt(t,e){t.c=!0,t.f.push(e)}function Et(t,e){t.c&&yt(e,function(e){return t.b(e)})}function Ct(t,e){var n=[];for(yt(e,function(t){return n.push(t)}),e=0;e<n.length;e++){var o=n[e];1===o.__CE_state?t.connectedCallback(o):Lt(t,o)}}function Pt(t,e){var n=[];for(yt(e,function(t){return n.push(t)}),e=0;e<n.length;e++){var o=n[e];1===o.__CE_state&&t.disconnectedCallback(o)}}function xt(t,e,n){n=void 0===n?{}:n;var o=n.Sa||new Set,i=n.oa||function(e){return Lt(t,e)},r=[];if(yt(e,function(e){if("link"===e.localName&&"import"===e.getAttribute("rel")){var n=e.import;n instanceof Node&&"complete"===n.readyState?(n.__CE_isImportDocument=!0,n.__CE_hasRegistry=!0):e.addEventListener("load",function(){var n=e.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0,n.__CE_isImportDocument=!0,n.__CE_hasRegistry=!0;var r=new Set(o);r.delete(n),xt(t,n,{Sa:r,oa:i})}})}else r.push(e)},o),t.c)for(e=0;e<r.length;e++)t.b(r[e]);for(e=0;e<r.length;e++)i(r[e])}function Lt(t,e){if(void 0===e.__CE_state){var n=t.a.get(e.localName);if(n){n.constructionStack.push(e);var o=n.constructor;try{try{if(new o!==e)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{n.constructionStack.pop()}}catch(t){throw e.__CE_state=2,t}if(e.__CE_state=1,e.__CE_definition=n,n.attributeChangedCallback)for(n=n.observedAttributes,o=0;o<n.length;o++){var i=n[o],r=e.getAttribute(i);null!==r&&t.attributeChangedCallback(e,i,null,r,null)}gt(e)&&t.connectedCallback(e)}}}function St(t,e){this.h=t,this.a=e,this.w=void 0,xt(this.h,this.a),"loading"===this.a.readyState&&(this.w=new MutationObserver(this.b.bind(this)),this.w.observe(this.a,{childList:!0,subtree:!0}))}function Tt(t){t.w&&t.w.disconnect()}function Ot(){var t=this;this.b=this.a=void 0,this.c=new Promise(function(e){t.b=e,t.a&&e(t.a)})}function Nt(t){if(t.a)throw Error("Already resolved.");t.a=void 0,t.b&&t.b(void 0)}function At(t){this.W=!1,this.h=t,this.$=new Map,this.X=function(t){return t()},this.K=!1,this.Y=[],this.xa=new St(t,document)}function kt(t){if(!1!==t.K){t.K=!1;for(var e=t.Y,n=[],o=new Map,i=0;i<e.length;i++)o.set(e[i].localName,[]);for(xt(t.h,document,{oa:function(e){if(void 0===e.__CE_state){var i=e.localName,r=o.get(i);r?r.push(e):t.h.a.get(i)&&n.push(e)}}}),i=0;i<n.length;i++)Lt(t.h,n[i]);for(;0<e.length;){var r=e.shift();i=r.localName,r=o.get(r.localName);for(var a=0;a<r.length;a++)Lt(t.h,r[a]);(i=t.$.get(i))&&Nt(i)}}}function Mt(t,e,n){function o(e){return function(n){for(var o=[],i=0;i<arguments.length;++i)o[i-0]=arguments[i];i=[];for(var r=[],a=0;a<o.length;a++){var s=o[a];if(s instanceof Element&&gt(s)&&r.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(e.apply(this,o),o=0;o<r.length;o++)Pt(t,r[o]);if(gt(this))for(o=0;o<i.length;o++)(r=i[o])instanceof Element&&Ct(t,r)}}void 0!==n.P&&(e.prepend=o(n.P)),void 0!==n.append&&(e.append=o(n.append))}function Dt(t){function e(e){return function(n){for(var o=[],i=0;i<arguments.length;++i)o[i-0]=arguments[i];i=[];for(var r=[],a=0;a<o.length;a++){var s=o[a];if(s instanceof Element&&gt(s)&&r.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(e.apply(this,o),o=0;o<r.length;o++)Pt(t,r[o]);if(gt(this))for(o=0;o<i.length;o++)(r=i[o])instanceof Element&&Ct(t,r)}}var n=Element.prototype;void 0!==Eo&&(n.before=e(Eo)),void 0!==Eo&&(n.after=e(Co)),void 0!==Po&&mt(n,"replaceWith",function(e){for(var n=[],o=0;o<arguments.length;++o)n[o-0]=arguments[o];o=[];for(var i=[],r=0;r<n.length;r++){var a=n[r];if(a instanceof Element&&gt(a)&&i.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)o.push(a);else o.push(a)}for(r=gt(this),Po.apply(this,n),n=0;n<i.length;n++)Pt(t,i[n]);if(r)for(Pt(t,this),n=0;n<o.length;n++)(i=o[n])instanceof Element&&Ct(t,i)}),void 0!==xo&&mt(n,"remove",function(){var e=gt(this);xo.call(this),e&&Pt(t,this)})}function It(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function Bt(t){t=t.replace(Ro,"").replace(Fo,"");var e=jt,n=t,o=new It;o.start=0,o.end=n.length;for(var i=o,r=0,a=n.length;r<a;r++)if("{"===n[r]){i.rules||(i.rules=[]);var s=i,l=s.rules[s.rules.length-1]||null;i=new It,i.start=r+1,i.parent=s,i.previous=l,s.rules.push(i)}else"}"===n[r]&&(i.end=r+1,i=i.parent||o);return e(o,t)}function jt(t,e){var n=e.substring(t.start,t.end-1);if(t.parsedCssText=t.cssText=n.trim(),t.parent&&(n=e.substring(t.previous?t.previous.end:t.parent.start,t.start-1),n=Rt(n),n=n.replace(qo," "),n=n.substring(n.lastIndexOf(";")+1),n=t.parsedSelector=t.selector=n.trim(),t.atRule=0===n.indexOf("@"),t.atRule?0===n.indexOf("@media")?t.type=Bo:n.match(Go)&&(t.type=Io,t.keyframesName=t.selector.split(qo).pop()):t.type=0===n.indexOf("--")?jo:Do),n=t.rules)for(var o,i=0,r=n.length;i<r&&(o=n[i]);i++)jt(o,e);return t}function Rt(t){return t.replace(/\\([0-9a-f]{1,6})\s/gi,function(t,e){for(t=e,e=6-t.length;e--;)t="0"+t;return"\\"+t})}function Ft(t,e,n){n=void 0===n?"":n;var o="";if(t.cssText||t.rules){var i,r=t.rules;if((i=r)&&(i=r[0],i=!(i&&i.selector&&0===i.selector.indexOf("--"))),i){i=0;for(var a,s=r.length;i<s&&(a=r[i]);i++)o=Ft(a,e,o)}else e?e=t.cssText:(e=t.cssText,e=e.replace(Ho,"").replace(Vo,""),e=e.replace(Uo,"").replace(zo,"")),(o=e.trim())&&(o="  "+o+"\n")}return o&&(t.selector&&(n+=t.selector+" {\n"),n+=o,t.selector&&(n+="}\n\n")),n}function Ht(t){Mo=(!t||!t.shimcssproperties)&&(Wo||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)")))}function Vt(t,e){return t?("string"==typeof t&&(t=Bt(t)),e&&Gt(t,e),Ft(t,Xo)):""}function Ut(t){return!t.__cssRules&&t.textContent&&(t.__cssRules=Bt(t.textContent)),t.__cssRules||null}function zt(t){return!!t.parent&&t.parent.type===Io}function Gt(t,e,n,o){if(t){var i=!1,r=t.type;if(o&&r===Bo){var a=t.selector.match(Jo);a&&(window.matchMedia(a[1]).matches||(i=!0))}if(r===Do?e(t):n&&r===Io?n(t):r===jo&&(i=!0),(t=t.rules)&&!i){i=0,r=t.length;for(var s;i<r&&(s=t[i]);i++)Gt(s,e,n,o)}}}function qt(t,e,n,o){var i=document.createElement("style");return e&&i.setAttribute("scope",e),i.textContent=t,Wt(i,n,o),i}function Wt(t,e,n){e=e||document.head,e.insertBefore(t,n&&n.nextSibling||e.firstChild),ti?t.compareDocumentPosition(ti)===Node.DOCUMENT_POSITION_PRECEDING&&(ti=t):ti=t}function Xt(t,e){var n=t.indexOf("var(");if(-1===n)return e(t,"","","");t:{for(var o=0,i=n+3,r=t.length;i<r;i++)if("("===t[i])o++;else if(")"===t[i]&&0==--o)break t;i=-1}return o=t.substring(n+4,i),n=t.substring(0,n),t=Xt(t.substring(i+1),e),i=o.indexOf(","),-1===i?e(n,o.trim(),"",t):e(n,o.substring(0,i).trim(),o.substring(i+1).trim(),t)}function Yt(t,e){Wo?t.setAttribute("class",e):window.ShadyDOM.nativeMethods.setAttribute.call(t,"class",e)}function Kt(t){var e=t.localName,n="";return e?-1<e.indexOf("-")||(n=e,e=t.getAttribute&&t.getAttribute("is")||""):(e=t.is,n=t.extends),{is:e,J:n}}function $t(){}function Qt(t,e,n){var o=yi;t.__styleScoped?t.__styleScoped=null:Jt(o,t,e||"",n)}function Jt(t,e,n,o){if(e.nodeType===Node.ELEMENT_NODE&&Zt(e,n,o),e="template"===e.localName?(e.content||e.Ya).childNodes:e.children||e.childNodes)for(var i=0;i<e.length;i++)Jt(t,e[i],n,o)}function Zt(t,e,n){if(e)if(t.classList)n?(t.classList.remove("style-scope"),t.classList.remove(e)):(t.classList.add("style-scope"),t.classList.add(e));else if(t.getAttribute){var o=t.getAttribute(gi);n?o&&(e=o.replace("style-scope","").replace(e,""),Yt(t,e)):Yt(t,(o?o+" ":"")+"style-scope "+e)}}function te(t,e,n){var o=yi,i=t.__cssBuild;return Wo||"shady"===i?e=Vt(e,n):(t=Kt(t),e=ee(o,e,t.is,t.J,n)+"\n\n"),e.trim()}function ee(t,e,n,o,i){var r=ne(n,o);return n=n?di+n:"",Vt(e,function(e){e.c||(e.selector=e.j=oe(t,e,t.b,n,r),e.c=!0),i&&i(e,n,r)})}function ne(t,e){return e?"[is="+t+"]":t}function oe(t,e,n,o,i){var r=e.selector.split(oi);if(!zt(e)){e=0;for(var a,s=r.length;e<s&&(a=r[e]);e++)r[e]=n.call(t,a,o,i)}return r.join(oi)}function ie(t){return t.replace(ei,function(t,e,n){return-1<n.indexOf("+")?n=n.replace(/\+/g,"___"):-1<n.indexOf("___")&&(n=n.replace(/___/g,"+")),":"+e+"("+n+")"})}function re(t,e,n,o){var i=t.indexOf(li);if(0<=t.indexOf(ai)?t=se(t,o):0!==i&&(t=n?ae(t,n):t),n=!1,0<=i&&(e="",n=!0),n){var r=!0;n&&(t=t.replace(hi,function(t,e){return" > "+e}))}return t=t.replace(pi,function(t,e,n){return'[dir="'+n+'"] '+e+", "+e+'[dir="'+n+'"]'}),{value:t,Ba:e,stop:r}}function ae(t,e){return t=t.split(fi),t[0]+=e,t.join(fi)}function se(t,e){var n=t.match(ui);return(n=n&&n[2].trim()||"")?n[0].match(ri)?t.replace(ui,function(t,n,o){return e+o}):n.split(ri)[0]===e?n:vi:t.replace(ai,e)}function le(t){t.selector===si&&(t.selector="html")}function ce(t,e,n,o,i){this.u=t||null,this.b=e||null,this.ba=n||[],this.B=null,this.J=i||"",this.a=this.o=this.v=null}function ue(t){return t?t.__styleInfo:null}function he(t,e){return t.__styleInfo=e}function pe(){}function de(t){var e={},n=[],o=0;Gt(t,function(t){fe(t),t.index=o++,t=t.g.cssText;for(var n;n=$o.exec(t);){var i=n[1];":"!==n[2]&&(e[i]=!0)}},function(t){n.push(t)}),t.b=n,t=[];for(var i in e)t.push(i);return t}function fe(t){if(!t.g){var e={},n={};ge(t,n)&&(e.s=n,t.rules=null),e.cssText=t.parsedCssText.replace(Zo,"").replace(Yo,""),t.g=e}}function ge(t,e){var n=t.g;if(!n){n=t.parsedCssText;for(var o;t=Yo.exec(n);)o=(t[2]||t[3]).trim(),"inherit"===o&&"unset"===o||(e[t[1].trim()]=o),o=!0;return o}if(n.s)return Object.assign(e,n.s),!0}function ve(t,e,n){return e&&(e=0<=e.indexOf(";")?ye(t,e,n):Xt(e,function(e,o,i,r){return o?((o=ve(t,n[o],n))&&"initial"!==o?"apply-shim-inherit"===o&&(o="inherit"):o=ve(t,n[i]||i,n)||i,e+(o||"")+r):e+r})),e&&e.trim()||""}function ye(t,e,n){e=e.split(";");for(var o,i,r=0;r<e.length;r++)if(o=e[r]){if(Ko.lastIndex=0,i=Ko.exec(o))o=ve(t,n[i[1]],n);else if(-1!==(i=o.indexOf(":"))){var a=o.substring(i);a=a.trim(),a=ve(t,a,n)||a,o=o.substring(0,i)+a}e[r]=o&&o.lastIndexOf(";")===o.length-1?o.slice(0,-1):o||""}return e.join(";")}function me(t,e){var n={},o=[];return Gt(t,function(t){t.g||fe(t);var i=t.j||t.parsedSelector;e&&t.g.s&&i&&mi.call(e,i)&&(ge(t,n),t=t.index,i=parseInt(t/32,10),o[i]=(o[i]||0)|1<<t%32)},null,!0),{s:n,key:o}}function be(t,e,n,o,i){if(n.g||fe(n),n.g.s){e=Kt(e),t=e.is,e=e.J,e=t?ne(t,e):"html";var r=n.parsedSelector,a=":host > *"===r||"html"===r,s=0===r.indexOf(":host")&&!a;"shady"===o&&(a=r===e+" > *."+e||-1!==r.indexOf("html"),s=!a&&0===r.indexOf(e)),"shadow"===o&&(a=":host > *"===r||"html"===r,s=s&&!a),(a||s)&&(o=e,s&&(Wo&&!n.j&&(n.j=oe(yi,n,yi.b,t?di+t:"",e)),o=n.j||e),i({Pa:o,Ga:s,$a:a}))}}function _e(t,e){var n={},o={},i=wi,r=e&&e.__cssBuild;return Gt(e,function(e){be(i,t,e,r,function(i){mi.call(t.Za||t,i.Pa)&&(i.Ga?ge(e,n):ge(e,o))})},null,!0),{Na:o,Fa:n}}function we(t,e,n,o){var i=Kt(e),r=ne(i.is,i.J),a=new RegExp("(?:^|[^.#[:])"+(e.extends?"\\"+r.slice(0,-1)+"\\]":r)+"($|[.:[\\s>+~])");i=ue(e).u;var s=Ee(i,o);return te(e,i,function(e){var i="";if(e.g||fe(e),e.g.cssText&&(i=ye(t,e.g.cssText,n)),e.cssText=i,!Wo&&!zt(e)&&e.cssText){var l=i=e.cssText;if(null==e.ja&&(e.ja=Qo.test(i)),e.ja)if(null==e.O){e.O=[];for(var c in s)l=s[c],l=l(i),i!==l&&(i=l,e.O.push(c))}else{for(c=0;c<e.O.length;++c)l=s[e.O[c]],i=l(i);l=i}e.cssText=l,e.j=e.j||e.selector,i="."+o,c=e.j.split(","),l=0;for(var u,h=c.length;l<h&&(u=c[l]);l++)c[l]=u.match(a)?u.replace(r,i):i+" "+u;e.selector=c.join(",")}})}function Ee(t,e){t=t.b;var n={};if(!Wo&&t)for(var o=0,i=t[o];o<t.length;i=t[++o]){var r=i,a=e;r.f=new RegExp(r.keyframesName,"g"),r.a=r.keyframesName+"-"+a,r.j=r.j||r.selector,r.selector=r.j.replace(r.keyframesName,r.a),n[i.keyframesName]=Ce(i)}return n}function Ce(t){return function(e){return e.replace(t.f,t.a)}}function Pe(t,e){var n=wi,o=Ut(t);t.textContent=Vt(o,function(t){var o=t.cssText=t.parsedCssText;t.g&&t.g.cssText&&(o=o.replace(Ho,"").replace(Vo,""),t.cssText=ye(n,o,e))})}function xe(t){this.cache={},this.a=void 0===t?100:t}function Le(){}function Se(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.target!==document.documentElement&&n.target!==document.head)for(var o=0;o<n.addedNodes.length;o++){var i=n.addedNodes[o];if(i.nodeType===Node.ELEMENT_NODE){var r=i.getRootNode(),a=i,s=[];if(a.classList?s=Array.from(a.classList):a instanceof window.SVGElement&&a.hasAttribute("class")&&(s=a.getAttribute("class").split(/\s+/)),a=s,s=a.indexOf(yi.a),(a=-1<s?a[s+1]:"")&&r===i.ownerDocument)Qt(i,a,!0);else if(r.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(r=r.host))if(r=Kt(r).is,a===r)for(i=window.ShadyDOM.nativeMethods.querySelectorAll.call(i,":not(."+yi.a+")"),r=0;r<i.length;r++)Zt(i[r],a);else a&&Qt(i,a,!0),Qt(i,r)}}}}function Te(t){(t=Ni[t])&&(t._applyShimCurrentVersion=t._applyShimCurrentVersion||0,t._applyShimValidatingVersion=t._applyShimValidatingVersion||0,t._applyShimNextVersion=(t._applyShimNextVersion||0)+1)}function Oe(t){return t._applyShimCurrentVersion===t._applyShimNextVersion}function Ne(t){t._applyShimValidatingVersion=t._applyShimNextVersion,t.b||(t.b=!0,Ai.then(function(){t._applyShimCurrentVersion=t._applyShimNextVersion,t.b=!1}))}function Ae(t){requestAnimationFrame(function(){Mi?Mi(t):(ki||(ki=new Promise(function(t){Ti=t}),"complete"===document.readyState?Ti():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&Ti()})),ki.then(function(){t&&t()}))})}function ke(){var t=this;this.F={},this.c=document.documentElement;var e=new It;e.rules=[],this.f=he(this.c,new ce(e)),this.l=!1,this.b=this.a=null,Ae(function(){De(t)})}function Me(t){!t.b&&window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface&&(t.b=window.ShadyCSS.CustomStyleInterface,t.b.transformCallback=function(e){t.na(e)},t.b.validateCallback=function(){requestAnimationFrame(function(){(t.b.enqueued||t.l)&&t.A()})})}function De(t){!t.a&&window.ShadyCSS&&window.ShadyCSS.ApplyShim&&(t.a=window.ShadyCSS.ApplyShim,t.a.invalidCallback=Te),Me(t)}function Ie(t,e){return(e=e.getRootNode().host)?ue(e)?e:Ie(t,e):t.c}function Be(t,e,n){t=Ie(t,e);var o=ue(t);t=Object.create(o.v||null);var i=_e(e,n.u);e=me(o.u,e).s,Object.assign(t,i.Fa,e,i.Na),e=n.B;for(var r in e)((i=e[r])||0===i)&&(t[r]=i);for(r=wi,e=Object.getOwnPropertyNames(t),i=0;i<e.length;i++)o=e[i],t[o]=ve(r,t[o],t);n.v=t}var je,Re="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this,Fe="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},He=function(){var t=0;return function(e){return"jscomp_symbol_"+(e||"")+t++}}();!function(t){function e(t,e){if("function"==typeof window.CustomEvent)return new CustomEvent(t,e);var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail),n}function n(t){if(u)return t.ownerDocument!==document?t.ownerDocument:null;var e=t.__importDoc;if(!e&&t.parentNode){if(e=t.parentNode,"function"==typeof e.closest)e=e.closest("link[rel=import]");else for(;!s(e)&&(e=e.parentNode););t.__importDoc=e}return e}function o(t){var e=document.querySelectorAll("link[rel=import]:not([import-dependency])"),n=e.length;n?c(e,function(e){return a(e,function(){0==--n&&t()})}):t()}function i(t){function e(){"loading"!==document.readyState&&document.body&&(document.removeEventListener("readystatechange",e),t())}document.addEventListener("readystatechange",e),e()}function r(t){i(function(){return o(function(){return t&&t()})})}function a(t,e){if(t.__loaded)e&&e();else if("script"===t.localName&&!t.src||"style"===t.localName&&!t.firstChild)t.__loaded=!0,e&&e();else{var n=function(o){t.removeEventListener(o.type,n),t.__loaded=!0,e&&e()};t.addEventListener("load",n),y&&"style"===t.localName||t.addEventListener("error",n)}}function s(t){return t.nodeType===Node.ELEMENT_NODE&&"link"===t.localName&&"import"===t.rel}function l(){var t=this;this.a={},this.b=0,this.f=new MutationObserver(function(e){return t.Ia(e)}),this.f.observe(document.head,{childList:!0,subtree:!0}),this.c(document)}function c(t,e,n){var o=t?t.length:0,i=n?-1:1;for(n=n?o-1:0;n<o&&0<=n;n+=i)e(t[n],n)}var u="import"in document.createElement("link"),h=null;!1=="currentScript"in document&&Object.defineProperty(document,"currentScript",{get:function(){return h||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null)},configurable:!0});var p=/(url\()([^)]*)(\))/g,d=/(@import[\s]+(?!url\())([^;]*)(;)/g,f=/(<link[^>]*)(rel=['|"]?stylesheet['|"]?[^>]*>)/g,g={Ca:function(t,e){if(t.href&&t.setAttribute("href",g.R(t.getAttribute("href"),e)),t.src&&t.setAttribute("src",g.R(t.getAttribute("src"),e)),"style"===t.localName){var n=g.ma(t.textContent,e,p);t.textContent=g.ma(n,e,d)}},ma:function(t,e,n){return t.replace(n,function(t,n,o,i){return t=o.replace(/["']/g,""),e&&(t=g.R(t,e)),n+"'"+t+"'"+i})},R:function(t,e){if(void 0===g.V){g.V=!1;try{var n=new URL("b","http://a");n.pathname="c%20d",g.V="http://a/c%20d"===n.href}catch(t){}}return g.V?new URL(t,e).href:(n=g.va,n||(n=document.implementation.createHTMLDocument("temp"),g.va=n,n.ea=n.createElement("base"),n.head.appendChild(n.ea),n.da=n.createElement("a")),n.ea.href=e,n.da.href=t,n.da.href||t)}},v={async:!0,load:function(t,e,n){if(t)if(t.match(/^data:/)){t=t.split(",");var o=t[1];o=-1<t[0].indexOf(";base64")?atob(o):decodeURIComponent(o),e(o)}else{var i=new XMLHttpRequest;i.open("GET",t,v.async),i.onload=function(){var t=i.responseURL||i.getResponseHeader("Location");t&&0===t.indexOf("/")&&(t=(location.origin||location.protocol+"//"+location.host)+t);var o=i.response||i.responseText;304===i.status||0===i.status||200<=i.status&&300>i.status?e(o,t):n(o)},i.send()}else n("error: href must be specified")}},y=/Trident/.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent);if(l.prototype.c=function(t){var e=this;t=t.querySelectorAll("link[rel=import]"),c(t,function(t){return e.F(t)})},l.prototype.F=function(t){var e=this,n=t.href;if(void 0!==this.a[n]){var o=this.a[n];o&&o.__loaded&&(t.import=o,this.l(t))}else this.b++,this.a[n]="pending",v.load(n,function(t,o){t=e.Ja(t,o||n),e.a[n]=t,e.b--,e.c(t),e.ka()},function(){e.a[n]=null,e.b--,e.ka()})},l.prototype.Ja=function(t,e){if(!t)return document.createDocumentFragment();y&&(t=t.replace(f,function(t,e,n){return-1===t.indexOf("type=")?e+" type=import-disable "+n:t}));var n=document.createElement("template");if(n.innerHTML=t,n.content)t=n.content;else for(t=document.createDocumentFragment();n.firstChild;)t.appendChild(n.firstChild);(n=t.querySelector("base"))&&(e=g.R(n.getAttribute("href"),e),n.removeAttribute("href")),n=t.querySelectorAll('link[rel=import], link[rel=stylesheet][href][type=import-disable],\n    style:not([type]), link[rel=stylesheet][href]:not([type]),\n    script:not([type]), script[type="application/javascript"],\n    script[type="text/javascript"]');var o=0;return c(n,function(t){a(t),g.Ca(t,e),t.setAttribute("import-dependency",""),"script"===t.localName&&!t.src&&t.textContent&&(t.setAttribute("src","data:text/javascript;charset=utf-8,"+encodeURIComponent(t.textContent+"\n//# sourceURL="+e+(o?"-"+o:"")+".js\n")),t.textContent="",o++)}),t},l.prototype.ka=function(){var t=this;if(!this.b){this.f.disconnect(),this.flatten(document);var e=!1,n=!1,o=function(){n&&e&&(t.c(document),t.b||(t.f.observe(document.head,{childList:!0,subtree:!0}),t.Ha()))};this.Oa(function(){n=!0,o()}),this.Ka(function(){e=!0,o()})}},l.prototype.flatten=function(t){var e=this;t=t.querySelectorAll("link[rel=import]"),c(t,function(t){var n=e.a[t.href];(t.import=n)&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(e.a[t.href]=t,t.readyState="loading",t.import=t,e.flatten(n),t.appendChild(n))})},l.prototype.Ka=function(t){function e(i){if(i<o){var r=n[i],s=document.createElement("script");r.removeAttribute("import-dependency"),c(r.attributes,function(t){return s.setAttribute(t.name,t.value)}),h=s,r.parentNode.replaceChild(s,r),a(s,function(){h=null,e(i+1)})}else t()}var n=document.querySelectorAll("script[import-dependency]"),o=n.length;e(0)},l.prototype.Oa=function(t){var e=document.querySelectorAll("style[import-dependency],\n    link[rel=stylesheet][import-dependency]"),o=e.length;if(o){var i=y&&!!document.querySelector("link[rel=stylesheet][href][type=import-disable]");c(e,function(e){if(a(e,function(){e.removeAttribute("import-dependency"),0==--o&&t()}),i&&e.parentNode!==document.head){var r=document.createElement(e.localName);for(r.__appliedElement=e,r.setAttribute("type","import-placeholder"),e.parentNode.insertBefore(r,e.nextSibling),r=n(e);r&&n(r);)r=n(r);r.parentNode!==document.head&&(r=null),document.head.insertBefore(e,r),e.removeAttribute("type")}})}else t()},l.prototype.Ha=function(){var t=this;c(document.querySelectorAll("link[rel=import]"),function(e){return t.l(e)},!0)},l.prototype.l=function(t){t.__loaded||(t.__loaded=!0,t.import&&(t.import.readyState="complete"),t.dispatchEvent(e(t.import?"load":"error",{bubbles:!1,cancelable:!1,detail:void 0})))},l.prototype.Ia=function(t){var e=this;c(t,function(t){return c(t.addedNodes,function(t){t&&t.nodeType===Node.ELEMENT_NODE&&(s(t)?e.F(t):e.c(t))})})},u){var m=document.querySelectorAll("link[rel=import]");c(m,function(t){t.import&&"loading"===t.import.readyState||(t.__loaded=!0)}),m=function(t){t=t.target,s(t)&&(t.__loaded=!0)},document.addEventListener("load",m,!0),document.addEventListener("error",m,!0)}else{var b=Object.getOwnPropertyDescriptor(Node.prototype,"baseURI");Object.defineProperty((!b||b.configurable?Node:Element).prototype,"baseURI",{get:function(){var t=s(this)?this:n(this);return t?t.href:b&&b.get?b.get.call(this):(document.querySelector("base")||window.location).href},configurable:!0,enumerable:!0}),i(function(){return new l})}r(function(){return document.dispatchEvent(e("HTMLImportsLoaded",{cancelable:!0,bubbles:!0,detail:void 0}))}),t.useNative=u,t.whenReady=r,t.importForElement=n}(window.HTMLImports=window.HTMLImports||{});var Ve=window.ShadyDOM||{};Ve.Ea=!(!Element.prototype.attachShadow||!Node.prototype.getRootNode);var Ue=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild");Ve.G=!!(Ue&&Ue.configurable&&Ue.get),Ve.la=Ve.force||!Ve.Ea;var ze=Element.prototype,Ge=ze.matches||ze.matchesSelector||ze.mozMatchesSelector||ze.msMatchesSelector||ze.oMatchesSelector||ze.webkitMatchesSelector,qe=document.createTextNode(""),We=0,Xe=[];new MutationObserver(function(){for(;Xe.length;)try{Xe.shift()()}catch(t){throw qe.textContent=We++,t}}).observe(qe,{characterData:!0});var Ye,Ke=!!document.contains,$e=[];v.list=$e,y.prototype.takeRecords=function(){if(this.addedNodes.length||this.removedNodes.length){var t=[{addedNodes:this.addedNodes,removedNodes:this.removedNodes}];return this.addedNodes=[],this.removedNodes=[],t}return[]};var Qe={},Je=Element.prototype.insertBefore,Ze=Element.prototype.removeChild,tn=Element.prototype.setAttribute,en=Element.prototype.removeAttribute,nn=Element.prototype.cloneNode,on=Document.prototype.importNode,rn=Element.prototype.addEventListener,an=Element.prototype.removeEventListener,sn=Window.prototype.addEventListener,ln=Window.prototype.removeEventListener,cn=Element.prototype.dispatchEvent,un=Element.prototype.querySelector,hn=Element.prototype.querySelectorAll,pn=Node.prototype.contains||HTMLElement.prototype.contains;Qe.appendChild=Element.prototype.appendChild,Qe.insertBefore=Je,Qe.removeChild=Ze,Qe.setAttribute=tn,Qe.removeAttribute=en,Qe.cloneNode=nn,Qe.importNode=on,Qe.addEventListener=rn,Qe.removeEventListener=an,Qe.Ta=sn,Qe.Ua=ln,Qe.dispatchEvent=cn,Qe.querySelector=un,Qe.querySelectorAll=hn,Qe.contains=pn;var dn=/[&\u00A0"]/g,fn=/[&\u00A0<>]/g,gn=P("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),vn=P("style script xmp iframe noembed noframes plaintext noscript".split(" ")),yn={},mn=document.createTreeWalker(document,NodeFilter.SHOW_ALL,null,!1),bn=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,null,!1);yn.parentNode=function(t){return mn.currentNode=t,mn.parentNode()},yn.firstChild=function(t){return mn.currentNode=t,mn.firstChild()},yn.lastChild=function(t){return mn.currentNode=t,mn.lastChild()},yn.previousSibling=function(t){return mn.currentNode=t,mn.previousSibling()},yn.nextSibling=function(t){return mn.currentNode=t,mn.nextSibling()},yn.childNodes=L,yn.parentElement=function(t){return bn.currentNode=t,bn.parentNode()},yn.firstElementChild=function(t){return bn.currentNode=t,bn.firstChild()},yn.lastElementChild=function(t){return bn.currentNode=t,bn.lastChild()},yn.previousElementSibling=function(t){return bn.currentNode=t,bn.previousSibling()},yn.nextElementSibling=function(t){return bn.currentNode=t,bn.nextSibling()},yn.children=function(t){var e=[];for(bn.currentNode=t,t=bn.firstChild();t;)e.push(t),t=bn.nextSibling();return e},yn.innerHTML=function(t){return x(t,function(t){return L(t)})},yn.textContent=function(t){switch(t.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:t=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1);for(var e,n="";e=t.nextNode();)n+=e.nodeValue;return n;default:return t.nodeValue}};var _n=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML")||Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerHTML"),wn=document.implementation.createHTMLDocument("inert").createElement("div"),En=Object.getOwnPropertyDescriptor(Document.prototype,"activeElement"),Cn={parentElement:{get:function(){var t=this.__shady&&this.__shady.parentNode;return t&&t.nodeType!==Node.ELEMENT_NODE&&(t=null),void 0!==t?t:yn.parentElement(this)},configurable:!0},parentNode:{get:function(){var t=this.__shady&&this.__shady.parentNode;return void 0!==t?t:yn.parentNode(this)},configurable:!0},nextSibling:{get:function(){var t=this.__shady&&this.__shady.nextSibling;return void 0!==t?t:yn.nextSibling(this)},configurable:!0},previousSibling:{get:function(){var t=this.__shady&&this.__shady.previousSibling;return void 0!==t?t:yn.previousSibling(this)},configurable:!0},className:{get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)},configurable:!0},nextElementSibling:{get:function(){if(this.__shady&&void 0!==this.__shady.nextSibling){for(var t=this.nextSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.nextSibling;return t}return yn.nextElementSibling(this)},configurable:!0},previousElementSibling:{get:function(){if(this.__shady&&void 0!==this.__shady.previousSibling){for(var t=this.previousSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.previousSibling;return t}return yn.previousElementSibling(this)},configurable:!0}},Pn={childNodes:{get:function(){if(s(this)){if(!this.__shady.childNodes){this.__shady.childNodes=[];for(var t=this.firstChild;t;t=t.nextSibling)this.__shady.childNodes.push(t)}var e=this.__shady.childNodes}else e=yn.childNodes(this);return e.item=function(t){return e[t]},e},configurable:!0},childElementCount:{get:function(){return this.children.length},configurable:!0},firstChild:{get:function(){var t=this.__shady&&this.__shady.firstChild;return void 0!==t?t:yn.firstChild(this)},configurable:!0},lastChild:{get:function(){var t=this.__shady&&this.__shady.lastChild;return void 0!==t?t:yn.lastChild(this)},configurable:!0},textContent:{get:function(){if(s(this)){for(var t,e=[],n=0,o=this.childNodes;t=o[n];n++)t.nodeType!==Node.COMMENT_NODE&&e.push(t.textContent);return e.join("")}return yn.textContent(this)},set:function(t){switch(this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(0<t.length||this.nodeType===Node.ELEMENT_NODE)&&this.appendChild(document.createTextNode(t));break;default:this.nodeValue=t}},configurable:!0},firstElementChild:{get:function(){if(this.__shady&&void 0!==this.__shady.firstChild){for(var t=this.firstChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.nextSibling;return t}return yn.firstElementChild(this)},configurable:!0},lastElementChild:{get:function(){if(this.__shady&&void 0!==this.__shady.lastChild){for(var t=this.lastChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.previousSibling;return t}return yn.lastElementChild(this)},configurable:!0},children:{get:function(){var t;return t=s(this)?Array.prototype.filter.call(this.childNodes,function(t){return t.nodeType===Node.ELEMENT_NODE}):yn.children(this),t.item=function(e){return t[e]},t},configurable:!0},innerHTML:{get:function(){var t="template"===this.localName?this.content:this;return s(this)?x(t):yn.innerHTML(t)},set:function(t){for(var e="template"===this.localName?this.content:this;e.firstChild;)e.removeChild(e.firstChild);for(_n&&_n.set?_n.set.call(wn,t):wn.innerHTML=t;wn.firstChild;)e.appendChild(wn.firstChild)},configurable:!0}},xn={shadowRoot:{get:function(){return this.__shady&&this.__shady.Ma||null},configurable:!0}},Ln={activeElement:{get:function(){var t=En&&En.get?En.get.call(document):Ve.G?void 0:document.activeElement;if(t&&t.nodeType){var e=!!l(this);if(this===document||e&&this.host!==t&&Qe.contains.call(this.host,t)){for(e=c(t);e&&e!==this;)t=e.host,e=c(t);t=this===document?e?null:t:e===this?t:null}else t=null}else t=null;return t},set:function(){},configurable:!0}},Sn=Ve.G?function(){}:function(t){t.__shady&&t.__shady.ta||(t.__shady=t.__shady||{},t.__shady.ta=!0,S(t,Cn,!0))},Tn=Ve.G?function(){}:function(t){t.__shady&&t.__shady.ra||(t.__shady=t.__shady||{},t.__shady.ra=!0,S(t,Pn,!0),S(t,xn,!0))},On=null,Nn="__eventWrappers"+Date.now(),An={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,lostpointercapture:!0,dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0},kn={get composed(){return!1!==this.isTrusted&&void 0===this.S&&(this.S=An[this.type]),this.S||!1},composedPath:function(){return this.fa||(this.fa=z(this.__target,this.composed)),this.fa},get target(){return G(this.currentTarget,this.composedPath())},get relatedTarget(){return this.ga?(this.ha||(this.ha=z(this.ga,!0)),G(this.currentTarget,this.ha)):null},stopPropagation:function(){Event.prototype.stopPropagation.call(this),this.T=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this),this.T=this.qa=!0}},Mn={focus:!0,blur:!0},Dn=q(window.Event),In=q(window.CustomEvent),Bn=q(window.MouseEvent),jn={};et.prototype=Object.create(DocumentFragment.prototype),et.prototype._renderRoot=function(){this.L=!1,st(this);for(var t,e=0;e<this.m.length;e++){t=this.m[e];var n=t.__shady.assignedNodes;if(t.__shady.assignedNodes=[],t.__shady.D=[],t.__shady.ia=n)for(var o=0;o<n.length;o++){var i=n[o];i.__shady.Z=i.__shady.assignedSlot,i.__shady.assignedSlot===t&&(i.__shady.assignedSlot=null)}}for(t=this.host.firstChild;t;t=t.nextSibling)it(this,t);for(e=0;e<this.m.length;e++){if(t=this.m[e],!t.__shady.assignedNodes.length)for(n=t.firstChild;n;n=n.nextSibling)it(this,n,t);if(n=t.parentNode,(n=n.__shady&&n.__shady.root)&&ht(n)&&n._renderRoot(),rt(this,t.__shady.D,t.__shady.assignedNodes),n=t.__shady.ia){for(o=0;o<n.length;o++)n[o].__shady.Z=null;t.__shady.ia=null,n.length>t.__shady.assignedNodes.length&&(t.__shady.aa=!0)}t.__shady.aa&&(t.__shady.aa=!1,at(this,t))}for(e=this.m,t=[],n=0;n<e.length;n++)o=e[n].parentNode,o.__shady&&o.__shady.root||!(0>t.indexOf(o))||t.push(o);for(e=0;e<t.length;e++){n=t[e],o=n===this?this.host:n,i=[],n=n.childNodes;for(var r=0;r<n.length;r++){var a=n[r];if("slot"==a.localName){a=a.__shady.D;for(var s=0;s<a.length;s++)i.push(a[s])}else i.push(a)}n=void 0,r=yn.childNodes(o),a=Z(i,i.length,r,r.length);for(var l=s=0;s<a.length&&(n=a[s]);s++){for(var c,u=0;u<n.I.length&&(c=n.I[u]);u++)yn.parentNode(c)===o&&Qe.removeChild.call(o,c),r.splice(n.index+l,1);l-=n.M}for(l=0;l<a.length&&(n=a[l]);l++)for(s=r[n.index],u=n.index;u<n.index+n.M;u++)c=i[u],Qe.insertBefore.call(o,c,s),r.splice(u,0,c)}},et.prototype.addEventListener=function(t,e,n){"object"!=typeof n&&(n={capture:!!n}),n.U=this,this.host.addEventListener(t,e,n)},et.prototype.removeEventListener=function(t,e,n){"object"!=typeof n&&(n={capture:!!n}),n.U=this,this.host.removeEventListener(t,e,n)},et.prototype.getElementById=function(t){return F(this,function(e){return e.id==t},function(t){return!!t})[0]||null};var Rn=et.prototype;S(Rn,Pn,!0),S(Rn,Ln,!0);var Fn={addEventListener:K.bind(window),removeEventListener:$.bind(window)},Hn={addEventListener:K,removeEventListener:$,appendChild:function(t){return A(this,t)},insertBefore:function(t,e){return A(this,t,e)},removeChild:function(t){return k(this,t)},replaceChild:function(t,e){return A(this,t,e),k(this,e),t},cloneNode:function(t){if("template"==this.localName)var e=Qe.cloneNode.call(this,t);else if(e=Qe.cloneNode.call(this,!1),t){t=this.childNodes;for(var n,o=0;o<t.length;o++)n=t[o].cloneNode(!0),e.appendChild(n)}return e},getRootNode:function(){return R(this)},contains:function(t){return f(this,t)},get isConnected(){var t=this.ownerDocument;if(Ke&&Qe.contains.call(t,this)||t.documentElement&&Qe.contains.call(t.documentElement,this))return!0;for(t=this;t&&!(t instanceof Document);)t=t.parentNode||(t instanceof et?t.host:void 0);return!!(t&&t instanceof Document)},dispatchEvent:function(t){return v(),Qe.dispatchEvent.call(this,t)}},Vn={get assignedSlot(){return pt(this)}},Un={querySelector:function(t){return F(this,function(e){return Ge.call(e,t)},function(t){return!!t})[0]||null},querySelectorAll:function(t){return F(this,function(e){return Ge.call(e,t)})}},zn={assignedNodes:function(t){if("slot"===this.localName){var e=this.getRootNode();return l(e)&&ot(e),this.__shady?(t&&t.flatten?this.__shady.D:this.__shady.assignedNodes)||[]:[]}}},Gn=h({setAttribute:function(t,e){V(this,t,e)},removeAttribute:function(t){Qe.removeAttribute.call(this,t),B(this,t)},attachShadow:function(t){if(!this)throw"Must provide a host.";if(!t)throw"Not enough arguments.";return new et(jn,this,t)},get slot(){return this.getAttribute("slot")},set slot(t){V(this,"slot",t)},get assignedSlot(){return pt(this)}},Un,zn);Object.defineProperties(Gn,xn);var qn=h({importNode:function(t,e){return U(t,e)},getElementById:function(t){return F(this,function(e){return e.id==t},function(t){return!!t})[0]||null}},Un);Object.defineProperties(qn,{_activeElement:Ln.activeElement});var Wn=HTMLElement.prototype.blur,Xn=h({blur:function(){var t=this.__shady&&this.__shady.root;(t=t&&t.activeElement)?t.blur():Wn.call(this)}});if(Ve.la){var Yn={inUse:Ve.la,patch:function(t){return t},isShadyRoot:l,enqueue:g,flush:v,settings:Ve,filterMutations:E,observeChildren:_,unobserveChildren:w,nativeMethods:Qe,nativeTree:yn};window.ShadyDOM=Yn,window.Event=Dn,window.CustomEvent=In,window.MouseEvent=Bn,function(){for(var t in Mn)window.addEventListener(t,function(t){t.__target||(Q(t),X(t))},!0)}();var Kn=window.customElements&&window.customElements.nativeHTMLElement||HTMLElement;dt(window.Node.prototype,Hn),dt(window.Window.prototype,Fn),dt(window.Text.prototype,Vn),dt(window.DocumentFragment.prototype,Un),dt(window.Element.prototype,Gn),dt(window.Document.prototype,qn),window.HTMLSlotElement&&dt(window.HTMLSlotElement.prototype,zn),dt(Kn.prototype,Xn),Ve.G&&(T(window.Node.prototype),T(window.Text.prototype),T(window.DocumentFragment.prototype),T(window.Element.prototype),T(Kn.prototype),T(window.Document.prototype),window.HTMLSlotElement&&T(window.HTMLSlotElement.prototype)),window.ShadowRoot=et}var $n=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));bt.prototype.b=function(t){if(this.c&&!t.__CE_patched){t.__CE_patched=!0;for(var e=0;e<this.f.length;e++)this.f[e](t)}},bt.prototype.connectedCallback=function(t){var e=t.__CE_definition;e.connectedCallback&&e.connectedCallback.call(t)},bt.prototype.disconnectedCallback=function(t){var e=t.__CE_definition;e.disconnectedCallback&&e.disconnectedCallback.call(t)},bt.prototype.attributeChangedCallback=function(t,e,n,o,i){var r=t.__CE_definition;r.attributeChangedCallback&&-1<r.observedAttributes.indexOf(e)&&r.attributeChangedCallback.call(t,e,n,o,i)},St.prototype.b=function(t){var e=this.a.readyState;for("interactive"!==e&&"complete"!==e||Tt(this),e=0;e<t.length;e++)for(var n=t[e].addedNodes,o=0;o<n.length;o++)xt(this.h,n[o])},At.prototype.define=function(t,e){var n=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!ft(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(this.h.a.get(t))throw Error("A custom element with name '"+t+"' has already been defined.");if(this.W)throw Error("A custom element is already being defined.");this.W=!0;try{var o=function(t){var e=i[t];if(void 0!==e&&!(e instanceof Function))throw Error("The '"+t+"' callback must be a function.");return e},i=e.prototype;if(!(i instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var r=o("connectedCallback"),a=o("disconnectedCallback"),s=o("adoptedCallback"),l=o("attributeChangedCallback"),c=e.observedAttributes||[]}catch(t){return}finally{this.W=!1}e={localName:t,constructor:e,connectedCallback:r,disconnectedCallback:a,adoptedCallback:s,attributeChangedCallback:l,observedAttributes:c,constructionStack:[]},_t(this.h,t,e),this.Y.push(e),this.K||(this.K=!0,this.X(function(){return kt(n)}))},At.prototype.get=function(t){if(t=this.h.a.get(t))return t.constructor},At.prototype.whenDefined=function(t){if(!ft(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this.$.get(t);return e?e.c:(e=new Ot,this.$.set(t,e),this.h.a.get(t)&&!this.Y.some(function(e){return e.localName===t})&&Nt(e),e.c)},At.prototype.La=function(t){Tt(this.xa);var e=this.X;this.X=function(n){return t(function(){return e(n)})}},window.CustomElementRegistry=At,At.prototype.define=At.prototype.define,At.prototype.get=At.prototype.get,At.prototype.whenDefined=At.prototype.whenDefined,At.prototype.polyfillWrapFlushCallback=At.prototype.La;var Qn=window.Document.prototype.createElement,Jn=window.Document.prototype.createElementNS,Zn=window.Document.prototype.importNode,to=window.Document.prototype.prepend,eo=window.Document.prototype.append,no=window.DocumentFragment.prototype.prepend,oo=window.DocumentFragment.prototype.append,io=window.Node.prototype.cloneNode,ro=window.Node.prototype.appendChild,ao=window.Node.prototype.insertBefore,so=window.Node.prototype.removeChild,lo=window.Node.prototype.replaceChild,co=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),uo=window.Element.prototype.attachShadow,ho=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),po=window.Element.prototype.getAttribute,fo=window.Element.prototype.setAttribute,go=window.Element.prototype.removeAttribute,vo=window.Element.prototype.getAttributeNS,yo=window.Element.prototype.setAttributeNS,mo=window.Element.prototype.removeAttributeNS,bo=window.Element.prototype.insertAdjacentElement,_o=window.Element.prototype.prepend,wo=window.Element.prototype.append,Eo=window.Element.prototype.before,Co=window.Element.prototype.after,Po=window.Element.prototype.replaceWith,xo=window.Element.prototype.remove,Lo=window.HTMLElement,So=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),To=window.HTMLElement.prototype.insertAdjacentElement,Oo=new function(){},No=window.customElements;if(!No||No.forcePolyfill||"function"!=typeof No.define||"function"!=typeof No.get){var Ao=new bt;!function(){var t=Ao;window.HTMLElement=function(){function e(){var e=this.constructor,n=t.l.get(e);if(!n)throw Error("The custom element being constructed was not registered with `customElements`.");var o=n.constructionStack;if(0===o.length)return o=Qn.call(document,n.localName),Object.setPrototypeOf(o,e.prototype),o.__CE_state=1,o.__CE_definition=n,t.b(o),o;n=o.length-1;var i=o[n];if(i===Oo)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return o[n]=Oo,Object.setPrototypeOf(i,e.prototype),t.b(i),i}return e.prototype=Lo.prototype,e}()}(),function(){var t=Ao;mt(Document.prototype,"createElement",function(e){if(this.__CE_hasRegistry){var n=t.a.get(e);if(n)return new n.constructor}return e=Qn.call(this,e),t.b(e),e}),mt(Document.prototype,"importNode",function(e,n){return e=Zn.call(this,e,n),this.__CE_hasRegistry?xt(t,e):Et(t,e),e}),mt(Document.prototype,"createElementNS",function(e,n){if(this.__CE_hasRegistry&&(null===e||"http://www.w3.org/1999/xhtml"===e)){var o=t.a.get(n);if(o)return new o.constructor}return e=Jn.call(this,e,n),t.b(e),e}),Mt(t,Document.prototype,{P:to,append:eo})}(),Mt(Ao,DocumentFragment.prototype,{P:no,append:oo}),function(){function t(t,n){Object.defineProperty(t,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)n.set.call(this,t);else{var o=void 0;if(this.firstChild){var i=this.childNodes,r=i.length;if(0<r&&gt(this)){o=Array(r);for(var a=0;a<r;a++)o[a]=i[a]}}if(n.set.call(this,t),o)for(t=0;t<o.length;t++)Pt(e,o[t])}}})}var e=Ao;mt(Node.prototype,"insertBefore",function(t,n){if(t instanceof DocumentFragment){var o=Array.prototype.slice.apply(t.childNodes);if(t=ao.call(this,t,n),gt(this))for(n=0;n<o.length;n++)Ct(e,o[n]);return t}return o=gt(t),n=ao.call(this,t,n),o&&Pt(e,t),gt(this)&&Ct(e,t),n}),mt(Node.prototype,"appendChild",function(t){if(t instanceof DocumentFragment){var n=Array.prototype.slice.apply(t.childNodes);if(t=ro.call(this,t),gt(this))for(var o=0;o<n.length;o++)Ct(e,n[o]);return t}return n=gt(t),o=ro.call(this,t),n&&Pt(e,t),gt(this)&&Ct(e,t),o}),mt(Node.prototype,"cloneNode",function(t){return t=io.call(this,t),this.ownerDocument.__CE_hasRegistry?xt(e,t):Et(e,t),t}),mt(Node.prototype,"removeChild",function(t){var n=gt(t),o=so.call(this,t);return n&&Pt(e,t),o}),mt(Node.prototype,"replaceChild",function(t,n){if(t instanceof DocumentFragment){var o=Array.prototype.slice.apply(t.childNodes);if(t=lo.call(this,t,n),gt(this))for(Pt(e,n),n=0;n<o.length;n++)Ct(e,o[n]);return t}o=gt(t);var i=lo.call(this,t,n),r=gt(this);return r&&Pt(e,n),o&&Pt(e,t),r&&Ct(e,t),i}),co&&co.get?t(Node.prototype,co):wt(e,function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=0;e<this.childNodes.length;e++)t.push(this.childNodes[e].textContent);return t.join("")},set:function(t){for(;this.firstChild;)so.call(this,this.firstChild);ro.call(this,document.createTextNode(t))}})})}(),function(){function t(t,e){Object.defineProperty(t,"innerHTML",{enumerable:e.enumerable,configurable:!0,get:e.get,set:function(t){var o=this,i=void 0;if(gt(this)&&(i=[],yt(this,function(t){t!==o&&i.push(t)})),e.set.call(this,t),i)for(var r=0;r<i.length;r++){var a=i[r];1===a.__CE_state&&n.disconnectedCallback(a)}return this.ownerDocument.__CE_hasRegistry?xt(n,this):Et(n,this),t}})}function e(t,e){mt(t,"insertAdjacentElement",function(t,o){var i=gt(o);return t=e.call(this,t,o),i&&Pt(n,o),gt(t)&&Ct(n,o),t})}var n=Ao;if(uo&&mt(Element.prototype,"attachShadow",function(t){return this.__CE_shadowRoot=t=uo.call(this,t)}),ho&&ho.get)t(Element.prototype,ho);else if(So&&So.get)t(HTMLElement.prototype,So);else{var o=Qn.call(document,"div");wt(n,function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return io.call(this,!0).innerHTML},set:function(t){var e="template"===this.localName?this.content:this;for(o.innerHTML=t;0<e.childNodes.length;)so.call(e,e.childNodes[0]);for(;0<o.childNodes.length;)ro.call(e,o.childNodes[0])}})})}mt(Element.prototype,"setAttribute",function(t,e){if(1!==this.__CE_state)return fo.call(this,t,e);var o=po.call(this,t);fo.call(this,t,e),e=po.call(this,t),n.attributeChangedCallback(this,t,o,e,null)}),mt(Element.prototype,"setAttributeNS",function(t,e,o){if(1!==this.__CE_state)return yo.call(this,t,e,o);var i=vo.call(this,t,e);yo.call(this,t,e,o),o=vo.call(this,t,e),n.attributeChangedCallback(this,e,i,o,t)}),mt(Element.prototype,"removeAttribute",function(t){if(1!==this.__CE_state)return go.call(this,t);var e=po.call(this,t);go.call(this,t),null!==e&&n.attributeChangedCallback(this,t,e,null,null)}),mt(Element.prototype,"removeAttributeNS",function(t,e){if(1!==this.__CE_state)return mo.call(this,t,e);var o=vo.call(this,t,e);mo.call(this,t,e);var i=vo.call(this,t,e);o!==i&&n.attributeChangedCallback(this,e,o,i,t)}),To?e(HTMLElement.prototype,To):bo?e(Element.prototype,bo):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),Mt(n,Element.prototype,{P:_o,append:wo}),Dt(n)}(),document.__CE_hasRegistry=!0;var ko=new At(Ao);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:ko})}var Mo,Do=1,Io=7,Bo=4,jo=1e3,Ro=/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//gim,Fo=/@import[^;]*;/gim,Ho=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,Vo=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,Uo=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,zo=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,Go=/^@[^\s]*keyframes/,qo=/\s+/g,Wo=!(window.ShadyDOM&&window.ShadyDOM.inUse);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?Mo=window.ShadyCSS.nativeCss:window.ShadyCSS?(Ht(window.ShadyCSS),window.ShadyCSS=void 0):Ht(window.WebComponents&&window.WebComponents.flags);var Xo=Mo,Yo=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,Ko=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,$o=/(--[\w-]+)\s*([:,;)]|$)/gi,Qo=/(animation\s*:)|(animation-name\s*:)/,Jo=/@media\s(.*)/,Zo=/\{[^}]*\}/g,ti=null;$t.prototype.b=function(t,e,n){var o=!1;t=t.trim();var i=ei.test(t);return i&&(t=t.replace(ei,function(t,e,n){return":"+e+"("+n.replace(/\s/g,"")+")"}),t=ie(t)),t=t.replace(ci,ai+" $1"),t=t.replace(ii,function(t,i,r){return o||(t=re(r,i,e,n),o=o||t.stop,i=t.Ba,r=t.value),i+r}),i&&(t=ie(t)),t},$t.prototype.c=function(t){return t.match(li)?this.b(t,ni):ae(t.trim(),ni)},Re.Object.defineProperties($t.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"style-scope"}}});var ei=/:(nth[-\w]+)\(([^)]+)\)/,ni=":not(.style-scope)",oi=",",ii=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=[])+)/g,ri=/[[.:#*]/,ai=":host",si=":root",li="::slotted",ci=new RegExp("^("+li+")"),ui=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,hi=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,pi=/(.*):dir\((?:(ltr|rtl))\)/,di=".",fi=":",gi="class",vi="should_not_match",yi=new $t;ce.prototype.c=function(){return this.u},ce.prototype._getStyleRules=ce.prototype.c;var mi,bi=window.Element.prototype;mi=bi.matches||bi.matchesSelector||bi.mozMatchesSelector||bi.msMatchesSelector||bi.oMatchesSelector||bi.webkitMatchesSelector;var _i=navigator.userAgent.match("Trident");Re.Object.defineProperties(pe.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"x-scope"}}});var wi=new pe,Ei={},Ci=window.customElements;if(Ci&&!Wo){var Pi=Ci.define;Ci.define=function(t,e,n){var o=document.createComment(" Shady DOM styles for "+t+" "),i=document.head;return i.insertBefore(o,(ti?ti.nextSibling:null)||i.firstChild),ti=o,Ei[t]=o,Pi.call(Ci,t,e,n)}}if(xe.prototype.store=function(t,e,n,o){var i=this.cache[t]||[];i.push({s:e,styleElement:n,o:o}),i.length>this.a&&i.shift(),this.cache[t]=i},xe.prototype.fetch=function(t,e,n){if(t=this.cache[t])for(var o=t.length-1;0<=o;o--){var i,r=t[o];t:{for(i=0;i<n.length;i++){var a=n[i];if(r.s[a]!==e[a]){i=!1;break t}}i=!0}if(i)return r}},!Wo){var xi=new MutationObserver(Se),Li=function(t){xi.observe(t,{childList:!0,subtree:!0})};if(window.customElements&&!window.customElements.polyfillWrapFlushCallback)Li(document);else{var Si=function(){Li(document.body)};window.HTMLImports?window.HTMLImports.whenReady(Si):requestAnimationFrame(function(){if("loading"===document.readyState){var t=function(){Si(),document.removeEventListener("readystatechange",t)};document.addEventListener("readystatechange",t)}else Si()})}Le=function(){Se(xi.takeRecords())}}var Ti,Oi=Le,Ni={},Ai=Promise.resolve(),ki=null,Mi=window.HTMLImports&&window.HTMLImports.whenReady||null,Di=new xe;je=ke.prototype,je.pa=function(){Oi()},je.Da=function(t){return Ut(t)},je.Ra=function(t){return Vt(t)},je.prepareTemplate=function(t,e,n){if(!t.f){t.f=!0,t.name=e,t.extends=n,Ni[e]=t;for(var o=(o=t.content.querySelector("style"))?o.getAttribute("css-build")||"":"",i=t.content.querySelectorAll("style"),r=[],a=0;a<i.length;a++){var s=i[a];r.push(s.textContent),s.parentNode.removeChild(s)}i=r.join("").trim(),n={is:e,extends:n,Wa:o},Wo||Qt(t.content,e),De(this),r=Ko.test(i)||Yo.test(i),Ko.lastIndex=0,Yo.lastIndex=0,i=Bt(i),r&&Xo&&this.a&&this.a.transformRules(i,e),t._styleAst=i,t.l=o,o=[],Xo||(o=de(t._styleAst)),o.length&&!Xo||(i=Wo?t.content:null,e=Ei[e],r=te(n,t._styleAst),e=r.length?qt(r,n.is,i,e):void 0,t.a=e),t.c=o}},je.A=function(){if(De(this),this.b){var t=this.b.processStyles();if(this.b.enqueued){if(Xo)for(var e=0;e<t.length;e++){var n=this.b.getStyleForCustomStyle(t[e]);if(n&&Xo&&this.a){var o=Ut(n);De(this),this.a.transformRules(o),n.textContent=Vt(o)}}else for(Be(this,this.c,this.f),e=0;e<t.length;e++)(n=this.b.getStyleForCustomStyle(t[e]))&&Pe(n,this.f.v);this.b.enqueued=!1,this.l&&!Xo&&this.styleDocument()}}},je.styleElement=function(t,e){var n=Kt(t).is,o=ue(t);if(!o){var i=Kt(t);o=i.is,i=i.J;var r=Ei[o];if(o=Ni[o])var a=o._styleAst,s=o.c;o=he(t,new ce(a,r,s,0,i))}if(t!==this.c&&(this.l=!0),e&&(o.B=o.B||{},Object.assign(o.B,e)),Xo){if(o.B){e=o.B;for(var l in e)null===l?t.style.removeProperty(l):t.style.setProperty(l,e[l])}((l=Ni[n])||t===this.c)&&l&&l.a&&!Oe(l)&&((Oe(l)||l._applyShimValidatingVersion!==l._applyShimNextVersion)&&(De(this),this.a&&this.a.transformRules(l._styleAst,n),l.a.textContent=te(t,o.u),Ne(l)),Wo&&(n=t.shadowRoot)&&(n.querySelector("style").textContent=te(t,o.u)),o.u=l._styleAst)}else if(Be(this,t,o),o.ba&&o.ba.length){n=o,l=Kt(t).is,o=(e=Di.fetch(l,n.v,n.ba))?e.styleElement:null,a=n.o,(s=e&&e.o)||(s=this.F[l]=(this.F[l]||0)+1,s=l+"-"+s),n.o=s,s=n.o,i=wi,i=o?o.textContent||"":we(i,t,n.v,s),r=ue(t);var c=r.a;c&&!Wo&&c!==o&&0>=--c._useCount&&c.parentNode&&c.parentNode.removeChild(c),Wo?r.a?(r.a.textContent=i,o=r.a):i&&(o=qt(i,s,t.shadowRoot,r.b)):o?o.parentNode||(_i&&-1<i.indexOf("@media")&&(o.textContent=i),Wt(o,null,r.b)):i&&(o=qt(i,s,null,r.b)),o&&(o._useCount=o._useCount||0,r.a!=o&&o._useCount++,r.a=o),s=o,Wo||(o=n.o,r=i=t.getAttribute("class")||"",a&&(r=i.replace(new RegExp("\\s*x-scope\\s*"+a+"\\s*","g")," ")),r+=(r?" ":"")+"x-scope "+o,i!==r&&Yt(t,r)),e||Di.store(l,n.v,s,n.o)}},je.styleDocument=function(t){this.styleSubtree(this.c,t)},je.styleSubtree=function(t,e){var n=t.shadowRoot;if((n||t===this.c)&&this.styleElement(t,e),e=n&&(n.children||n.childNodes))for(t=0;t<e.length;t++)this.styleSubtree(e[t]);else if(t=t.children||t.childNodes)for(e=0;e<t.length;e++)this.styleSubtree(t[e])},je.na=function(t){var e=this,n=Ut(t);Gt(n,function(t){if(Wo)le(t);else{var n=yi;t.selector=t.parsedSelector,le(t),t.selector=t.j=oe(n,t,n.c,void 0,void 0)}Xo&&(De(e),e.a&&e.a.transformRule(t))}),Xo?t.textContent=Vt(n):this.f.u.rules.push(n)},je.getComputedStyleValue=function(t,e){var n;return Xo||(n=(ue(t)||ue(Ie(this,t))).v[e]),(n=n||window.getComputedStyle(t).getPropertyValue(e))?n.trim():""},je.Qa=function(t,e){var n=t.getRootNode();if(e=e?e.split(/\s/):[],!(n=n.host&&n.host.localName)){var o=t.getAttribute("class");if(o){o=o.split(/\s/);for(var i=0;i<o.length;i++)if(o[i]===yi.a){n=o[i+1];break}}}n&&e.push(yi.a,n),Xo||(n=ue(t))&&n.o&&e.push(wi.a,n.o),Yt(t,e.join(" "))},je.za=function(t){return ue(t)},ke.prototype.flush=ke.prototype.pa,ke.prototype.prepareTemplate=ke.prototype.prepareTemplate,ke.prototype.styleElement=ke.prototype.styleElement,ke.prototype.styleDocument=ke.prototype.styleDocument,ke.prototype.styleSubtree=ke.prototype.styleSubtree,ke.prototype.getComputedStyleValue=ke.prototype.getComputedStyleValue,ke.prototype.setElementClass=ke.prototype.Qa,ke.prototype._styleInfoForNode=ke.prototype.za,ke.prototype.transformCustomStyleForDocument=ke.prototype.na,ke.prototype.getStyleAst=ke.prototype.Da,ke.prototype.styleAstToString=ke.prototype.Ra,ke.prototype.flushCustomStyles=ke.prototype.A,Object.defineProperties(ke.prototype,{nativeShadow:{get:function(){return Wo}},nativeCss:{get:function(){return Xo}}});var Ii,Bi,ji=new ke;window.ShadyCSS&&(Ii=window.ShadyCSS.ApplyShim,Bi=window.ShadyCSS.CustomStyleInterface),window.ShadyCSS={ScopingShim:ji,prepareTemplate:function(t,e,n){ji.A(),ji.prepareTemplate(t,e,n)},styleSubtree:function(t,e){ji.A(),ji.styleSubtree(t,e)},styleElement:function(t){ji.A(),ji.styleElement(t)},styleDocument:function(t){ji.A(),ji.styleDocument(t)},getComputedStyleValue:function(t,e){return ji.getComputedStyleValue(t,e)},nativeCss:Xo,nativeShadow:Wo},Ii&&(window.ShadyCSS.ApplyShim=Ii),Bi&&(window.ShadyCSS.CustomStyleInterface=Bi);var Ri=window.customElements,Fi=window.HTMLImports,Hi=window.HTMLTemplateElement;if(window.WebComponents=window.WebComponents||{},Ri&&Ri.polyfillWrapFlushCallback){var Vi,Ui=function(){if(Vi){Hi.Aa&&Hi.Aa(window.document);var t=Vi;return Vi=null,t(),!0}},zi=Fi.whenReady;Ri.polyfillWrapFlushCallback(function(t){Vi=t,zi(Ui)}),Fi.whenReady=function(t){zi(function(){Ui()?Fi.whenReady(t):t()})}}Fi.whenReady(function(){requestAnimationFrame(function(){window.WebComponents.ready=!0,document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})});var Gi=document.createElement("style");Gi.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var qi=document.querySelector("head");qi.insertBefore(Gi,qi.firstChild)}).call(this)}).call(e,n(44))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),a=n(6),s=n(8),l=n(47),c=n(49),u=n(50),h=n(51),p=n(52),d=n(53),f=n(54),g=n(55),v=n(56),y=n(97),m=n(1),b=n(32),_=function(){function t(t){this.isRendering=!1,this.isNextRenderQueued=!1,this.canvas=t,this.eventAggregator=new y.EventAggregator,this.imageDownloader=new p.ImageDownloader({eventAggregator:this.eventAggregator}),this.polygonFiller=new l.PolygonFiller({canvas:this.canvas,eventAggregator:this.eventAggregator}),this.lightSimulator=new f.LightSimulator({eventAggregator:this.eventAggregator,centerPoint:new a.Point(this.canvas.width/2,this.canvas.height/2)}),this.renderer=new c.Renderer({canvas:this.canvas,polygonFiller:this.polygonFiller}),this.stage=new u.Stage,this.uiController=new v.UIController({renderer:this.renderer,stage:this.stage,canvas:this.canvas,eventAggregator:this.eventAggregator,imageDownloader:this.imageDownloader,polygonClipper:new g.PolygonClipper,closestPathFinder:new h.ClosestPathFinder}),this.onRenderEvent=this.onRenderEvent.bind(this),this.startRendering=this.startRendering.bind(this),this.onFillingFinished=this.onFillingFinished.bind(this)}return t.prototype.init=function(){return o(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return this.polygonFiller.fillingFinishedCallback=this.onFillingFinished,this.polygonLayer=new r.Layer(s.LEX.POLYGON_LAYER_NAME),this.stage.layers.push(this.polygonLayer),this.polygonFiller.init(),this.lightSimulator.init(),this.uiController.init(),this.addEventListeners(),t=new d.InputDataInitializer({eventAggregator:this.eventAggregator,imageDownloader:this.imageDownloader,polygonLayer:this.polygonLayer}),[4,t.init()];case 1:return e.sent(),[2]}})})},t.prototype.destroy=function(){this.polygonFiller.destroy(),this.lightSimulator.destroy(),this.uiController.destroy(),this.removeEventListeners()},t.prototype.onRenderEvent=function(t){if(t.handled=!0,this.isRendering)return void(this.isNextRenderQueued=!0);this.isRendering=!0,requestAnimationFrame(this.startRendering)},t.prototype.startRendering=function(){this.polygonFiller.fillPolygons(this.polygonLayer.paths)},t.prototype.onFillingFinished=function(){this.stage.render(this.renderer),this.eventAggregator.dispatchEvent(new b.RenderFinishedEvent),this.isNextRenderQueued?(this.isNextRenderQueued=!1,requestAnimationFrame(this.startRendering)):this.isRendering=!1},t.prototype.addEventListeners=function(){this.eventAggregator.addEventListener(m.RenderEvent.eventType,this.onRenderEvent)},t.prototype.removeEventListeners=function(){this.eventAggregator.removeEventListener(m.RenderEvent.eventType,this.onRenderEvent)},t}();e.Application=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,n){this.line=t,this.path=e,this.layer=n}return t}();e.HitTestResult=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=n(48),r=n(24),a=function(){function t(t){this.proxyEvents=[o.NewBackgroundTextureEvent,o.NewHeightMapEvent,o.NewHeightMapIntensityEvent,o.NewLightColorEvent,o.NewLightPositionEvent,o.NewLightTypeEvent,o.NewNormalMapEvent],this.eventAggregator=t.eventAggregator,this.canvas=t.canvas,this.onFillWorkerMessage=this.onFillWorkerMessage.bind(this),this.onFillWorkerError=this.onFillWorkerError.bind(this),this.sendAppFillDataEvent=this.sendAppFillDataEvent.bind(this)}return t.prototype.injectCanvasRenderingContext=function(t){this.renderingContext=t},t.prototype.init=function(){var t=this;this.proxyEvents.forEach(function(e){return t.eventAggregator.addEventListener(e.eventType,t.sendAppFillDataEvent)}),this.fillWorker=new Worker("fillWorker.js"),this.fillWorker.postMessage({type:r.FillWorkerMessageType.CanvasInfo,width:this.canvas.width,height:this.canvas.height}),this.fillWorker.addEventListener("message",this.onFillWorkerMessage),this.fillWorker.addEventListener("error",this.onFillWorkerError)},t.prototype.destroy=function(){var t=this;this.proxyEvents.forEach(function(e){return t.eventAggregator.removeEventListener(e.eventType,t.sendAppFillDataEvent)}),this.fillWorker.removeEventListener("message",this.onFillWorkerMessage),this.fillWorker.removeEventListener("error",this.onFillWorkerError),this.fillWorker.terminate()},t.prototype.fillPolygons=function(t){var e=this,n=this.fillWorker;n.postMessage({type:r.FillWorkerMessageType.StartFill}),t.forEach(function(t){return e.fillPolygon(t)}),n.postMessage({type:r.FillWorkerMessageType.EndFill})},t.prototype.onFillWorkerMessage=function(t){var e=t.data;this.renderingContext.putImageData(e,0,0),this.fillingFinishedCallback&&this.fillingFinishedCallback()},t.prototype.onFillWorkerError=function(t){console.error("Fill worker error",t)},t.prototype.fillPolygon=function(t){var e=this.getPolygonFillStrips(t);this.fillWorker.postMessage({type:r.FillWorkerMessageType.FillStrips,fillStrips:e})},t.prototype.getPolygonFillStrips=function(t){var e=t.getVertices(),n=t.getVerticesCount(),o=e.map(function(t,e){return e});o.sort(function(t,n){return e[t].y-e[n].y});for(var r=e[o[0]].y,a=e[o[n-1]].y,s=[],l=0,c=r,u=[],h=r+1;h<=a;h+=1){for(;l<n;l+=1){if("break"===function(){var n=o[l],r=e[n];if(r.y!==c)return"break";var a=t.getPreviousPointIndex(n),u=e[a];if(u.y>=r.y){var h=new i.ActiveEdge(r,u);s.push(h)}else{var p=s.findIndex(function(t){return t.lowerPoint===u&&t.higherPoint===r});s.splice(p,1)}var d=t.getNextPointIndex(n),f=e[d];if(f.y>=r.y){var g=new i.ActiveEdge(r,f);s.push(g)}else{var p=s.findIndex(function(t){return t.lowerPoint===f&&t.higherPoint===r});s.splice(p,1)}}())break}if(c>=0&&c<this.canvas.height){s.sort(function(t,e){return t.x-e.x});for(var p=0;p<s.length;p+=2){var d=s[p],f=s[p+1];u.push({y:c,fromX:d.x,toX:f.x})}}s.forEach(function(t){return t.nextScanLine()}),c=h}return u},t.prototype.sendAppFillDataEvent=function(t){this.fillWorker.postMessage({type:r.FillWorkerMessageType.NewFillDataEvent,event:t})},t}();e.PolygonFiller=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.lowerPoint=t,this.higherPoint=e,this._x=this.lowerPoint.x,this.calculateSlope()}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),t.prototype.nextScanLine=function(){this._x+=this.inverseSlope},t.prototype.calculateSlope=function(){this.higherPoint.y===this.lowerPoint.y?this.inverseSlope=99999999999:this.inverseSlope=(this.higherPoint.x-this.lowerPoint.x)/(this.higherPoint.y-this.lowerPoint.y)},t}();e.ActiveEdge=o},function(t,e,n){"use strict";var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),r=n(15),a=n(6),s=n(0),l=function(){function t(t){this.canvas=t.canvas;var e=this.canvas.getContext("2d");if(null===e)throw new Error("Cannot get canvas 2d rendering context");this.renderingContext=e,this.renderingContext.font=s.configuration.canvasFont,this.polygonFiller=t.polygonFiller,this.polygonFiller.injectCanvasRenderingContext(this.renderingContext),this.renderingContext.strokeStyle=i.COLORS.BLACK.fillStyle}return t.prototype.drawPoint=function(t){this.drawPixel(t.x,t.y)},t.prototype.drawPixel=function(t,e){this.renderingContext.fillRect(t,e,1,1)},t.prototype.drawLine=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[0]instanceof r.Line?this.drawLineBetweenPoints(t[0].p1,t[0].p2,t[1]):this.drawLineBetweenPoints(t[0],t[1],t[2])},t.prototype.drawPath=function(t){var e=t.getLineProperties();try{for(var n=o(t.getLineIterator()),i=n.next();!i.done;i=n.next()){var r=i.value;this.drawLine(r,e)}}catch(t){a={error:t}}finally{try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}var a,s},t.prototype.fillText=function(t,e,n){var o=e;"object"==typeof e&&e instanceof a.Point&&(o=e.x,n=e.y),this.renderingContext.fillText(t,o,n)},t.prototype.clear=function(){this.renderingContext.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.drawLineBetweenPoints=function(t,e,n){this.renderingContext.strokeStyle=n.color.fillStyle,this.renderingContext.beginPath(),this.renderingContext.moveTo(t.x,t.y),this.renderingContext.lineTo(e.x,e.y),this.renderingContext.stroke()},t}();e.Renderer=l},function(t,e,n){"use strict";var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.layers=[]}return t.prototype.render=function(t){this.layers.forEach(function(e){return e.render(t)})},t.prototype.removeLayer=function(t){var e=this.layers.indexOf(t);-1!==e&&this.layers.splice(e,1)},t.prototype.hitTest=function(t){try{for(var e=o(this.layers),n=e.next();!n.done;n=e.next()){var i=n.value,r=i.hitTest(t);if(r)return r}}catch(t){a={error:t}}finally{try{n&&!n.done&&(s=e.return)&&s.call(e)}finally{if(a)throw a.error}}return null;var a,s},t.prototype.findLayerByName=function(t){var e=this.layers.find(function(e){return e.name===t});if(!e)throw new Error("Layer with name "+t+" does not exist");return e},t}();e.Stage=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.getClosestPath=function(t,e){if(0===t.length)throw new Error("Paths array is empty");for(var n=t[0],o=this.getPathToPointDistance(n,e),i=1;i<t.length;i+=1){var r=t[i],a=this.getPathToPointDistance(r,e);o>a&&(n=r,o=a)}return n},t.prototype.getPathToPointDistance=function(t,e){return e.getDistanceSquaredTo(t.getCenterOfGravity())},t}();e.ClosestPathFinder=o},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n(29),a=n(30),s=function(){function t(t){this.eventAggregator=t.eventAggregator}return t.prototype.imageToImageData=function(t){return o(this,void 0,void 0,function(){var e,n;return i(this,function(o){switch(o.label){case 0:if(e=document.createElement("canvas"),!(n=e.getContext("2d")))throw new Error("Cannot get 2d drawing canvas context");return this.isImageDownloaded(t)?[3,2]:[4,this.waitForImage(t)];case 1:o.sent(),o.label=2;case 2:return e.width=t.naturalWidth,e.height=t.naturalHeight,n.drawImage(t,0,0),[2,n.getImageData(0,0,t.naturalWidth,t.naturalHeight)]}})})},t.prototype.isImageDownloaded=function(t){return!!t.complete&&0!==t.naturalWidth},t.prototype.waitForImage=function(t){var e=this;return this.dispatchLoadingStartedEvent(),new Promise(function(n,o){function i(){t.removeEventListener("load",i),t.removeEventListener("error",r),a(),n()}function r(){t.removeEventListener("load",i),t.removeEventListener("error",r),a(),o()}var a=e.dispatchLoadingFinishedEvent.bind(e);t.addEventListener("load",i),t.addEventListener("error",r)})},t.prototype.dispatchLoadingStartedEvent=function(){this.eventAggregator.dispatchEvent(new a.LoadingStartedEvent)},t.prototype.dispatchLoadingFinishedEvent=function(){this.eventAggregator.dispatchEvent(new r.LoadingFinishedEvent)},t}();e.ImageDownloader=s},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),a=n(1),s=n(3),l=n(0),c=n(9),u=n(11),h=n(6),p=n(25),d=function(){function t(t){this.eventAggregator=t.eventAggregator,this.imageDownloader=t.imageDownloader,this.polygonLayer=t.polygonLayer}return t.prototype.init=function(){return o(this,void 0,void 0,function(){var t,e,n,o,s,u=this;return i(this,function(i){switch(i.label){case 0:return this.addInitialPolygons(),t=[],e=new Image,e.src=l.configuration.presetBackgroundTextures[0],n=new Image,n.src=l.configuration.presetNormalMaps[0],o=new Image,o.src=l.configuration.presetHeightMaps[0],t.push(e,n,o),[4,Promise.all(t.map(function(t){return u.imageDownloader.imageToImageData(t)}))];case 1:return s=i.sent(),this.eventAggregator.dispatchEvent(new r.NewBackgroundTextureEvent(s[0])),this.eventAggregator.dispatchEvent(new r.NewNormalMapEvent(s[1])),this.eventAggregator.dispatchEvent(new r.NewHeightMapEvent(s[2])),this.eventAggregator.dispatchEvent(new r.NewHeightMapIntensityEvent(l.configuration.presetHeightMapIntensity)),this.eventAggregator.dispatchEvent(new r.NewLightColorEvent(l.configuration.presetLightColor)),this.eventAggregator.dispatchEvent(new r.NewLightPositionRadiusEvent(l.configuration.movingLight.defaultRadius)),this.eventAggregator.dispatchEvent(new r.NewLightTypeEvent(c.LightType.Constant)),this.eventAggregator.dispatchEvent(new a.RenderEvent),[2]}})})},t.prototype.destroy=function(){},t.prototype.addInitialPolygons=function(){var t=[new h.Point(94,93),new h.Point(69,386),new h.Point(190,525),new h.Point(664,364)],e=new p.Polygon(t,u.LineProperties.getDefault()),n=[new h.Point(777,142),new h.Point(700,50),new h.Point(433,34),new h.Point(404,156),new h.Point(527,263),new h.Point(750,350)],o=new p.Polygon(n,u.LineProperties.getDefault());this.polygonLayer.paths.push(e,o),this.eventAggregator.dispatchEvent(new s.SyncComponentsEvent)},t}();e.InputDataInitializer=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=n(1),r=n(0),a=n(9),s=n(7),l=function(){function t(t){this.horizontalRadiansModuloValue=2*Math.PI,this.lightHorizontalAngle=0,this.lightVerticalAngleOffset=r.configuration.movingLight.minVerticalAngle,this.lightVerticalRising=!0,this.eventAggregator=t.eventAggregator,this.centerPoint=t.centerPoint,this.onNewLightType=this.onNewLightType.bind(this),this.movingLightTick=this.movingLightTick.bind(this),this.onNewLightPositionRadius=this.onNewLightPositionRadius.bind(this)}return t.prototype.init=function(){this.eventAggregator.addEventListener(o.NewLightTypeEvent.eventType,this.onNewLightType),this.eventAggregator.addEventListener(o.NewLightPositionRadiusEvent.eventType,this.onNewLightPositionRadius),this.performInitialCalculations()},t.prototype.destroy=function(){this.eventAggregator.removeEventListener(o.NewLightTypeEvent.eventType,this.onNewLightType),this.eventAggregator.removeEventListener(o.NewLightPositionRadiusEvent.eventType,this.onNewLightPositionRadius),this.stopMovingLight()},t.prototype.performInitialCalculations=function(){this.horizontalStepInRadians=r.configuration.movingLight.tickInterval/r.configuration.movingLight.horizontalLapTime*2*Math.PI,this.minVerticalAngle=r.configuration.movingLight.minVerticalAngle,this.verticalAngleDelta=r.configuration.movingLight.maxVerticalAngle-this.minVerticalAngle,this.verticalStepInRadians=r.configuration.movingLight.tickInterval/r.configuration.movingLight.verticalLapTime*this.verticalAngleDelta},t.prototype.onNewLightType=function(t){switch(t.payload){case a.LightType.Constant:this.stopMovingLight(),this.dispatchLightPosition(new s.Vector3(0,0,1)),t.handled=!0;break;case a.LightType.Moving:this.startMovingLight(),t.handled=!0;break;default:throw new Error("Unknown light type")}},t.prototype.dispatchLightPosition=function(t){this.eventAggregator.dispatchEvent(new o.NewLightPositionEvent(t))},t.prototype.startMovingLight=function(){this.movingLightIntervalId=setInterval(this.movingLightTick,r.configuration.movingLight.tickInterval)},t.prototype.movingLightTick=function(){var t=this.centerPoint,e=t.x,n=t.y,o=r.configuration.movingLight.minVerticalAngle+this.lightVerticalAngleOffset,a=this.lightPositionRadius*Math.cos(o),l=e+a*Math.cos(this.lightHorizontalAngle),c=n+a*Math.sin(this.lightHorizontalAngle),u=this.lightPositionRadius*Math.sin(o),h=new s.Vector3(l,c,u);this.dispatchLightPosition(h),this.eventAggregator.dispatchEvent(new i.RenderEvent),this.horizontalTick(),this.verticalTick()},t.prototype.horizontalTick=function(){this.lightHorizontalAngle+=this.horizontalStepInRadians,this.lightHorizontalAngle>=this.horizontalRadiansModuloValue&&(this.lightHorizontalAngle-=this.horizontalRadiansModuloValue)},t.prototype.verticalTick=function(){this.lightVerticalRising?(this.lightVerticalAngleOffset+=this.verticalStepInRadians,this.lightVerticalAngleOffset>=this.verticalAngleDelta&&(this.lightVerticalRising=!1)):(this.lightVerticalAngleOffset-=this.verticalStepInRadians,this.lightVerticalAngleOffset<=0&&(this.lightVerticalRising=!0))},t.prototype.stopMovingLight=function(){clearInterval(this.movingLightIntervalId),this.lightHorizontalAngle=0,this.lightVerticalAngleOffset=r.configuration.movingLight.minVerticalAngle,this.lightVerticalRising=!0},t.prototype.onNewLightPositionRadius=function(t){this.lightPositionRadius=t.payload},t}();e.LightSimulator=l},function(t,e,n){"use strict";var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),r=n(6),a=n(25),s=function(){function t(){}return t.prototype.clipPolygons=function(t,e){if(t.isConvex())return this.clipPolygon(e,t);if(e.isConvex())return this.clipPolygon(t,e);throw new Error("Both polygons are concave")},t.prototype.clipPolygon=function(t,e){for(var n=this,s=e.getCenterOfGravity(),l=t.getVertices(),c=[],u=e.getVertices(),h=0;h<u.length;h+=1){var p=new i.Line(u[(h+1)%u.length],u[h]);c.push(p)}try{for(var d=o(c),f=d.next();!f.done;f=d.next()){var p=f.value;!function(t){var e=l;l=[];var o=e[e.length-1];e.forEach(function(e){n.isSameSide(e,s,t)?(n.isSameSide(o,s,t)||l.push(n.getIntersectionPoint(new i.Line(o,e),t)),l.push(e)):n.isSameSide(o,s,t)&&l.push(n.getIntersectionPoint(new i.Line(o,e),t)),o=e})}(p)}}catch(t){y={error:t}}finally{try{f&&!f.done&&(m=d.return)&&m.call(d)}finally{if(y)throw y.error}}if(0===l.length)return null;var g=[];g.push(l[0]);for(var h=1;h<l.length;h+=1)r.Point.epsilonEquals(l[h],g[g.length-1])||g.push(l[h]);var v=g.map(function(t){return t.floor()});return new a.Polygon(v,t.lineProperties);var y,m},t.prototype.isSameSide=function(t,e,n){var o=n.getDirection(t),i=n.getDirection(e);return o===i||0===o||0===i},t.prototype.getIntersectionPoint=function(t,e){var n=r.Point.subtract(t.p2,t.p1),o=r.Point.subtract(e.p2,e.p1),i=n.x*o.y-n.y*o.x,a=new r.Point(e.p1.x-t.p1.x,e.p1.y-t.p1.y),s=(a.x*o.y-a.y*o.x)/i;return new r.Point(t.p1.x+s*n.x,t.p1.y+s*n.y)},t}();e.PolygonClipper=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=n(8),r=n(57),a=n(73),s=n(77),l=n(78),c=n(79),u=n(80),h=n(81),p=n(82),d=n(83),f=n(87),g=n(36);n(90),n(93),n(37);var v=n(96),y=function(){function t(t){this.uiServices=[],this.canvas=t.canvas,this.renderer=t.renderer,this.stage=t.stage,this.eventAggregator=t.eventAggregator,this.imageDownloader=t.imageDownloader,this.polygonClipper=t.polygonClipper,this.closestPathFinder=t.closestPathFinder,this.onClick=this.onClick.bind(this),this.onMouseDown=this.onMouseDown.bind(this)}return t.prototype.init=function(){this.findApplicationUIContainer(),this.findDialogOverlay(),this.mousePositionTransformer=new s.MousePositionTransformer(this.canvas),this.canvas.addEventListener("click",this.onClick),this.canvas.addEventListener("mousedown",this.onMouseDown),this.createNewPolygonUIController(),this.createPointDraggingService(),this.createPointInserterService(),this.createPointRemoverService(),this.createPointSyncService(),this.createPathDraggingService(),this.createSerializationService(),this.createInputDataService(),this.createPolygonClippingService(),this.createLoadingUIService(),this.uiServices.forEach(function(t){return t.init()})},t.prototype.destroy=function(){this.canvas.removeEventListener("click",this.onClick),this.canvas.removeEventListener("mousedown",this.onMouseDown),this.uiServices.forEach(function(t){return t.destroy()}),this.uiServices.splice(0,this.uiServices.length)},t.prototype.onMouseDown=function(t){if(t.ctrlKey)return this.pathDraggingService.startMovingPath(t),!1},t.prototype.onClick=function(t){if(t.stopPropagation(),!this.pathDraggingService.isDragging){var e=this.mousePositionTransformer.getPointFromMouseEvent(t);if(t.shiftKey)return this.polygonClippingService.clipPolygons(e);var n=this.stage.hitTest(e);if(!n)return this.newPolygonUIController.addNewPoint(e);n.path&&(t.stopPropagation(),this.eventAggregator.dispatchEvent(new g.LineClickEvent(n.line,n.path,e)))}},t.prototype.findApplicationUIContainer=function(){var t=document.getElementById(o.configuration.applicationUIContainerID);if(!t)throw new Error("Application UI container not found");this.applicationUIContainer=t},t.prototype.findDialogOverlay=function(){var t=document.querySelector("app-dialog-overlay");if(!t)throw new Error("Dialog overlay not found");this.dialogOverlay=t},t.prototype.createPointSyncService=function(){var t=new d.PointSyncService({container:this.applicationUIContainer,mousePositionTransformer:this.mousePositionTransformer,stage:this.stage,eventAggregator:this.eventAggregator});this.uiServices.push(t)},t.prototype.createPointRemoverService=function(){var t=new p.PointRemoverService({eventAggregator:this.eventAggregator});this.uiServices.push(t)},t.prototype.createPointDraggingService=function(){var t=new u.PointDraggingService({eventAggregator:this.eventAggregator,stage:this.stage,canvas:this.canvas});this.uiServices.push(t)},t.prototype.createNewPolygonUIController=function(){this.newPolygonUIController=new l.NewPolygonUIController({canvas:this.canvas,stage:this.stage,polygonLayer:this.stage.findLayerByName(i.LEX.POLYGON_LAYER_NAME),renderer:this.renderer,mousePositionTransformer:this.mousePositionTransformer,eventAggregator:this.eventAggregator}),this.uiServices.push(this.newPolygonUIController)},t.prototype.createPointInserterService=function(){var t=new h.PointInserterService({eventAggregator:this.eventAggregator});this.uiServices.push(t)},t.prototype.createPathDraggingService=function(){this.pathDraggingService=new c.PathDraggingService({canvas:this.canvas,eventAggregator:this.eventAggregator,mousePositionTransformer:this.mousePositionTransformer,stage:this.stage,closestPathFinder:this.closestPathFinder}),this.uiServices.push(this.pathDraggingService)},t.prototype.createSerializationService=function(){var t=new f.SerializationService({eventAggregator:this.eventAggregator,stage:this.stage});this.uiServices.push(t)},t.prototype.createInputDataService=function(){var t=new r.InputDataService({eventAggregator:this.eventAggregator,imageDownloader:this.imageDownloader,dialogOverlay:this.dialogOverlay});this.uiServices.push(t)},t.prototype.createPolygonClippingService=function(){this.polygonClippingService=new v.PolygonClippingService({polygonClipper:this.polygonClipper,eventAggregator:this.eventAggregator,polygonLayer:this.stage.findLayerByName(i.LEX.POLYGON_LAYER_NAME),closestPathFinder:this.closestPathFinder}),this.uiServices.push(this.polygonClippingService)},t.prototype.createLoadingUIService=function(){var t=new a.LoadingUIService({dialogOverlay:this.dialogOverlay,eventAggregator:this.eventAggregator});this.uiServices.push(t)},t}();e.UIController=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(58),i=function(){function t(t){this.eventAggregator=t.eventAggregator,this.imageDownloader=t.imageDownloader,this.dialogOverlay=t.dialogOverlay}return t.prototype.init=function(){this.findInputDataContainer(),this.setupElements(),this.inputDataContainer.appendChild(this.backgroundSelectButton),this.inputDataContainer.appendChild(this.lightColorSelectButton),this.inputDataContainer.appendChild(this.normalMapSelectButton),this.inputDataContainer.appendChild(this.heightMapSelectButton),this.inputDataContainer.appendChild(this.lightTypeSelect),this.inputDataContainer.appendChild(this.heightMapIntensityInput)},t.prototype.destroy=function(){this.inputDataContainer.removeChild(this.backgroundSelectButton),this.inputDataContainer.removeChild(this.lightColorSelectButton),this.inputDataContainer.removeChild(this.normalMapSelectButton),this.inputDataContainer.removeChild(this.heightMapSelectButton),this.inputDataContainer.removeChild(this.lightTypeSelect),this.inputDataContainer.removeChild(this.heightMapIntensityInput)},t.prototype.findInputDataContainer=function(){var t=document.getElementById("input-data-container");if(!t)throw new Error("Input data container not found");this.inputDataContainer=t},t.prototype.setupElements=function(){var t=this,e=t.eventAggregator,n=t.dialogOverlay,i=t.imageDownloader,r={eventAggregator:e,dialogOverlay:n,imageDownloader:i},a={dialogOverlay:n,eventAggregator:e};this.backgroundSelectButton=new o.BackgroundSelectButton(r),this.heightMapSelectButton=new o.HeightMapSelectButton(r),this.lightColorSelectButton=new o.LightColorSelectButton(a),this.normalMapSelectButton=new o.NormalMapSelectButton(r),this.lightTypeSelect=new o.LightTypeSelect({eventAggregator:e}),this.heightMapIntensityInput=new o.HeightMapIntensityInput({eventAggregator:e})},t}();e.InputDataService=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(59);e.BackgroundSelectButton=o.BackgroundSelectButton;var i=n(62);e.HeightMapIntensityInput=i.HeightMapIntensityInput;var r=n(63);e.HeightMapSelectButton=r.HeightMapSelectButton;var a=n(64);e.LightColorSelectButton=a.LightColorSelectButton;var s=n(70);e.LightTypeSelect=s.LightTypeSelect;var l=n(72);e.NormalMapSelectButton=l.NormalMapSelectButton},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),s=n(1),l=n(0),c=n(26),u=n(27),h=function(t){function e(e){var n=t.call(this,e)||this;return n.button.innerText="Select background texture",n}return o(e,t),e.prototype.setupDialogBox=function(){this.dialogBox=new c.ImageSelectDialog(l.configuration.presetBackgroundTextures,l.configuration.initialCustomBackgroundColorHex),this.dialogBox.name="Background texture"},e.prototype.onDialogBoxClosed=function(){return i(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return this.dialogBox.wasCancelled?[2]:[4,this.getSelectedImageData()];case 1:return t=e.sent(),this.eventAggregator.dispatchEvent(new a.NewBackgroundTextureEvent(t)),this.eventAggregator.dispatchEvent(new s.RenderEvent),[2]}})})},e}(u.ImageSelectDialogButton);e.BackgroundSelectButton=h,customElements.define("app-background-select-button",h)},function(t,e,n){var o=n(61);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(5)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(4)(void 0),e.push([t.i,".image-select-dialog{padding:1rem;width:75%;max-width:800px}.image-select-dialog__heading{margin:.5em 0}.image-select-dialog__block{border-bottom:1px solid #000;padding-bottom:1em}.image-select-dialog__preset-images-container{display:flex;flex-direction:row;justify-content:space-between;flex-wrap:wrap}.image-select-dialog__preset-images-container>div{max-width:25%;max-height:200px;margin:auto}.image-select-dialog__preset-images-container img{max-width:100%;max-height:200px}.image-select-dialog__custom-image{display:block;max-width:25%;max-height:200px;margin:auto}.image-select-dialog__image--selected{border:3px solid green}.image-select-dialog__bottom-buttons{display:flex;justify-content:space-around;margin-top:1em}.image-select-dialog__bottom-buttons button{font-size:1.3em}",""])},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(2),a=n(1),s=function(t){function e(e){var n=t.call(this)||this;n.eventAggregator=e.eventAggregator,n.style.display="block";var o=document.createElement("label");return o.setAttribute("for","height-map-intensity"),o.innerText="Height map intensity: ",n.appendChild(o),n.input=document.createElement("input"),n.input.type="number",n.input.min="0",n.input.max="1",n.input.step="0.01",n.resetInputValue(),n.appendChild(n.input),n.onInputChange=n.onInputChange.bind(n),n}return o(e,t),e.prototype.connectedCallback=function(){this.input.addEventListener("change",this.onInputChange)},e.prototype.disconnectedCallback=function(){this.input.removeEventListener("change",this.onInputChange)},e.prototype.onInputChange=function(){var t=parseFloat(this.input.value);if(Number.isNaN(t))return this.resetInputValue(),void alert("Height map intensity must be a number");this.eventAggregator.dispatchEvent(new r.NewHeightMapIntensityEvent(t)),this.eventAggregator.dispatchEvent(new a.RenderEvent)},e.prototype.resetInputValue=function(){this.input.value=i.configuration.presetHeightMapIntensity.toString()},e}(HTMLElement);e.HeightMapIntensityInput=s,customElements.define("height-map-intensity-input",s)},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),s=n(1),l=n(0),c=n(26),u=n(27),h=function(t){function e(e){var n=t.call(this,e)||this;return n.button.innerText="Select height map",n}return o(e,t),e.prototype.setupDialogBox=function(){this.dialogBox=new c.ImageSelectDialog(l.configuration.presetHeightMaps,l.configuration.initialCustomHeightMapColorHex),this.dialogBox.name="Height map"},e.prototype.onDialogBoxClosed=function(){return i(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return this.dialogBox.wasCancelled?[2]:[4,this.getSelectedImageData()];case 1:return t=e.sent(),this.eventAggregator.dispatchEvent(new a.NewHeightMapEvent(t)),this.eventAggregator.dispatchEvent(new s.RenderEvent),[2]}})})},e}(u.ImageSelectDialogButton);e.HeightMapSelectButton=h,customElements.define("app-height-map-select-button",h)},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),r=n(0),a=n(2),s=n(1),l=n(65),c=n(31),u=function(t){function e(e){var n=t.call(this,{dialogOverlay:e.dialogOverlay})||this;return n.eventAggregator=e.eventAggregator,n.button.innerText="Select light color",n}return o(e,t),e.prototype.setupDialogBox=function(){this.dialogBox=new l.ColorSelectDialog,this.dialogBox.name="Light color",this.dialogBox.selectedColor=r.configuration.presetLightColor.toColor()},e.prototype.onDialogBoxClosed=function(){if(!this.dialogBox.wasCancelled){var t=this.dialogBox.selectedColor,e=i.Vector3.fromColor(t);this.eventAggregator.dispatchEvent(new a.NewLightColorEvent(e)),this.eventAggregator.dispatchEvent(new s.RenderEvent)}},e}(c.DialogBoxButton);e.LightColorSelectButton=u,customElements.define("app-light-color-select-button",u)},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0}),n(66);var i=n(10);n(68);var r={DIALOG_BOX:"dialog-box",DIALOG:"color-select-dialog",HEADER:"color-select-dialog__header",HEADING:"color-select-dialog__heading",BLOCK:"image-select-dialog__block",BOTTOM_BUTTONS:"color-select-dialog__bottom-buttons"},a=function(t){function e(){var e=t.call(this)||this;return e._wasCancelled=!0,e.classList.add(r.DIALOG_BOX),e.classList.add(r.DIALOG),e.onCancelButtonClick=e.onCancelButtonClick.bind(e),e.onConfirmButtonClick=e.onConfirmButtonClick.bind(e),e.createHeader(),e.createColorInput(),e.createBottomButtons(),e}return o(e,t),Object.defineProperty(e,"observedAttributes",{get:function(){return["name"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getAttribute("name")||"Color select"},set:function(t){this.setAttribute("name",t),this.heading.innerText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedColor",{get:function(){return i.Color.fromHexString(this.colorInput.value)},set:function(t){this.colorInput.value=t.toHexString()},enumerable:!0,configurable:!0}),e.prototype.connectedCallback=function(){this._wasCancelled=!0,this.cancelButton.addEventListener("click",this.onCancelButtonClick),this.confirmButton.addEventListener("click",this.onConfirmButtonClick)},e.prototype.disconnectedCallback=function(){this.cancelButton.removeEventListener("click",this.onCancelButtonClick),this.confirmButton.removeEventListener("click",this.onConfirmButtonClick)},Object.defineProperty(e.prototype,"wasCancelled",{get:function(){return this._wasCancelled},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.dispatchEvent(new CustomEvent("close"))},e.prototype.canClose=function(){return!0},e.prototype.createHeader=function(){var t=this.createBlock();t.classList.add(r.HEADER),this.appendChild(t),this.heading=document.createElement("h2"),this.heading.classList.add(r.HEADING),this.heading.innerText=this.name,t.appendChild(this.heading)},e.prototype.createColorInput=function(){this.colorInput=document.createElement("input"),this.colorInput.type="color",this.appendChild(this.colorInput)},e.prototype.createBottomButtons=function(){var t=document.createElement("div");t.classList.add(r.BOTTOM_BUTTONS),this.appendChild(t),this.cancelButton=document.createElement("button"),this.cancelButton.innerText="Cancel",this.confirmButton=document.createElement("button"),this.confirmButton.innerText="Confirm",t.appendChild(this.cancelButton),t.appendChild(this.confirmButton)},e.prototype.onCancelButtonClick=function(){this.close()},e.prototype.onConfirmButtonClick=function(){this._wasCancelled=!1,this.close()},e.prototype.createBlock=function(){var t=document.createElement("div");return t.classList.add(r.BLOCK),t},e}(HTMLElement);e.ColorSelectDialog=a,customElements.define("app-color-select-dialog",a)},function(t,e,n){var o=n(67);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(5)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(4)(void 0),e.push([t.i,".dialog-box{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);z-index:1;background-color:#eee;border:1px solid #000;border-radius:25px;color:#222;padding:2rem;border-radius:10px;box-shadow:2px 2px 5px #000;transition:transform .25s ease-in-out;will-change:transform}.dialog-box--active{transform:translate(-50%,-50%) scale(1)}",""])},function(t,e,n){var o=n(69);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(5)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(4)(void 0),e.push([t.i,".color-select-dialog{padding:1rem;width:50%;max-width:300px}.color-select-dialog__block{border-bottom:1px solid #000;padding-bottom:1em}.color-select-dialog__heading{margin:.5em 0}.color-select-dialog__bottom-buttons{display:flex;justify-content:space-around;margin-top:1em}.color-select-dialog__bottom-buttons button{font-size:1.3em}",""])},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=n(2),a=n(1),s=n(71),l=function(t){function e(e){var n=t.call(this)||this;return n.lightTypeInfoList=[{lightType:i.LightType.Constant,optionValue:"constant",optionLabel:"Constant ([0, 0, 1])"},{lightType:i.LightType.Moving,optionValue:"moving",optionLabel:"Moving above the screen"}],n.style.display="block",n.eventAggregator=e.eventAggregator,n.setupLightTypeLabel(),n.setupLightTypeSelect(),n.onLightTypeChange=n.onLightTypeChange.bind(n),n.lightPositionRadiusInput=new s.LightPositionRadiusInput({eventAggregator:n.eventAggregator}),n.lightPositionRadiusInput.style.marginLeft="5px",n}return o(e,t),Object.defineProperty(e.prototype,"selectedLightType",{get:function(){var t=this.lightTypeSelect.value,e=this.lightTypeInfoList.find(function(e){return e.optionValue===t});if(!e)throw new Error("Invalid light type selected");return e.lightType},set:function(t){var e=this.lightTypeInfoList.find(function(e){return e.lightType===t});if(!e)throw new Error("Light type not supported");this.lightTypeSelect.value=e.optionValue,this.onLightTypeChange()},enumerable:!0,configurable:!0}),e.prototype.connectedCallback=function(){this.lightTypeSelect.addEventListener("change",this.onLightTypeChange)},e.prototype.disconnectedCallback=function(){this.lightTypeSelect.removeEventListener("change",this.onLightTypeChange)},e.prototype.setupLightTypeLabel=function(){var t=document.createElement("label");t.setAttribute("for","light-type-select"),t.innerText="Light type: ",this.appendChild(t)},e.prototype.setupLightTypeSelect=function(){var t=this;this.lightTypeSelect=document.createElement("select"),this.lightTypeSelect.id="light-type-select",this.appendChild(this.lightTypeSelect),this.lightTypeInfoList.forEach(function(e){var n=document.createElement("option");n.innerText=e.optionLabel,n.value=e.optionValue,t.lightTypeSelect.appendChild(n)})},e.prototype.onLightTypeChange=function(){var t=this.selectedLightType;this.eventAggregator.dispatchEvent(new r.NewLightTypeEvent(t)),this.eventAggregator.dispatchEvent(new a.RenderEvent),t===i.LightType.Moving?this.appendChild(this.lightPositionRadiusInput):this.removeChild(this.lightPositionRadiusInput)},e}(HTMLElement);e.LightTypeSelect=l,customElements.define("app-light-type-select",l)},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(0),a=function(t){function e(e){var n=t.call(this)||this;n.eventAggregator=e.eventAggregator;var o=document.createElement("label");return o.setAttribute("for","light-position-radius-input"),o.innerText="Light position radius: ",n.appendChild(o),n.input=document.createElement("input"),n.input.type="number",n.input.id="light-position-radius-input",n.input.min="0",n.input.style.width="80px",n.appendChild(n.input),n.setInputValue(r.configuration.movingLight.defaultRadius),n.onLightPositionRadiusChange=n.onLightPositionRadiusChange.bind(n),n}return o(e,t),Object.defineProperty(e.prototype,"lightPositionRadius",{get:function(){return parseFloat(this.input.value)},set:function(t){this.setInputValue(t),this.onLightPositionRadiusChange()},enumerable:!0,configurable:!0}),e.prototype.connectedCallback=function(){this.input.addEventListener("change",this.onLightPositionRadiusChange)},e.prototype.disconnectedCallback=function(){this.input.removeEventListener("change",this.onLightPositionRadiusChange)},e.prototype.onLightPositionRadiusChange=function(){var t=this.lightPositionRadius;this.setInputValue(t),this.eventAggregator.dispatchEvent(new i.NewLightPositionRadiusEvent(t))},e.prototype.setInputValue=function(t){this.input.value=t.toFixed(2)},e}(HTMLElement);e.LightPositionRadiusInput=a,customElements.define("app-light-position-radius-input",a)},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),s=n(1),l=n(0),c=n(26),u=n(27),h=function(t){function e(e){var n=t.call(this,e)||this;return n.button.innerText="Select normal map",n}return o(e,t),e.prototype.setupDialogBox=function(){this.dialogBox=new c.ImageSelectDialog(l.configuration.presetNormalMaps,l.configuration.initialCustomNormalMapColorHex),this.dialogBox.name="Normal map"},e.prototype.onDialogBoxClosed=function(){return i(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return this.dialogBox.wasCancelled?[2]:[4,this.getSelectedImageData()];case 1:return t=e.sent(),this.eventAggregator.dispatchEvent(new a.NewNormalMapEvent(t)),this.eventAggregator.dispatchEvent(new s.RenderEvent),[2]}})})},e}(u.ImageSelectDialogButton);e.NormalMapSelectButton=h,customElements.define("app-normal-map-select-button",h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(29),i=n(30),r=n(74),a=n(0),s=function(){function t(t){this.loadedAssetsCount=0,this.totalAssetsToLoadCount=0,this.hideLoadingBarTimeoutId=null,this.eventAggregator=t.eventAggregator,this.dialogOverlay=t.dialogOverlay,this.loadingBarDialog=new r.LoadingBarDialog,this.onLoadingStartedEvent=this.onLoadingStartedEvent.bind(this),this.onLoadingFinishedEvent=this.onLoadingFinishedEvent.bind(this),this.hideLoadingBar=this.hideLoadingBar.bind(this)}return t.prototype.init=function(){this.eventAggregator.addEventListener(o.LoadingFinishedEvent.eventType,this.onLoadingFinishedEvent),this.eventAggregator.addEventListener(i.LoadingStartedEvent.eventType,this.onLoadingStartedEvent)},t.prototype.destroy=function(){this.eventAggregator.removeEventListener(o.LoadingFinishedEvent.eventType,this.onLoadingFinishedEvent),this.eventAggregator.removeEventListener(i.LoadingStartedEvent.eventType,this.onLoadingStartedEvent),this.hideLoadingBar()},t.prototype.onLoadingStartedEvent=function(){0===this.totalAssetsToLoadCount&&this.showLoadingBar(),this.totalAssetsToLoadCount+=1,this.updateLoadingBar(),this.abortDelayedHideLoadingBar()},t.prototype.onLoadingFinishedEvent=function(){this.loadedAssetsCount+=1,this.updateLoadingBar(),this.loadedAssetsCount===this.totalAssetsToLoadCount&&this.delayedHideLoadingBar()},t.prototype.reset=function(){this.loadedAssetsCount=0,this.totalAssetsToLoadCount=0},t.prototype.showLoadingBar=function(){this.dialogOverlay.showDialog(this.loadingBarDialog)},t.prototype.delayedHideLoadingBar=function(){this.hideLoadingBarTimeoutId=setTimeout(this.hideLoadingBar,a.configuration.loadingBarHideDelay)},t.prototype.abortDelayedHideLoadingBar=function(){this.hideLoadingBarTimeoutId&&clearTimeout(this.hideLoadingBarTimeoutId)},t.prototype.hideLoadingBar=function(){this.reset(),this.loadingBarDialog.close(),this.hideLoadingBarTimeoutId=null},t.prototype.updateLoadingBar=function(){this.loadingBarDialog.loadedAssetsCount=this.loadedAssetsCount.toFixed(0),this.loadingBarDialog.totalAssetsCount=this.totalAssetsToLoadCount.toFixed(0)},t}();e.LoadingUIService=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0}),n(75);var i=function(t){function e(){var e=t.call(this)||this;e.className="loading-bar-dialog dialog-box",e.backgroundBar=document.createElement("div"),e.backgroundBar.className="loading-dialog__background-bar",e.backgroundBar.innerText=" ",e.progressLabel=document.createElement("span");var n=document.createElement("span");return n.innerText="Loading... ",n.appendChild(e.progressLabel),e.appendChild(e.backgroundBar),e.appendChild(n),e.totalAssetsCount="0",e.loadedAssetsCount="0",e.update(),e}return o(e,t),Object.defineProperty(e,"observedAttributes",{get:function(){return["total-assets-count","loaded-assets-count"]},enumerable:!0,configurable:!0}),e.prototype.connectedCallback=function(){},e.prototype.disconnectedCallback=function(){},e.prototype.attributeChangedCallback=function(t,e,n){"total-assets-count"!==t&&"loaded-assets-count"!==t||this.update()},e.prototype.close=function(){this.dispatchEvent(new CustomEvent("close"))},e.prototype.canClose=function(){return!1},Object.defineProperty(e.prototype,"totalAssetsCount",{get:function(){return this.getAttribute("total-assets-count")||""},set:function(t){this.setAttribute("total-assets-count",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadedAssetsCount",{get:function(){return this.getAttribute("loaded-assets-count")||""},set:function(t){this.setAttribute("loaded-assets-count",t)},enumerable:!0,configurable:!0}),e.prototype.update=function(){var t=parseInt(this.loadedAssetsCount,10),e=parseInt(this.totalAssetsCount,10),n=100;e>0&&(n=Math.round(t/e*100)),this.backgroundBar.style.width=n+"%",this.progressLabel.innerText=t+" / "+e+" ("+n+" %)"},e}(HTMLElement);e.LoadingBarDialog=i,window.customElements.define("app-loading-bar-dialog",i)},function(t,e,n){var o=n(76);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(5)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(4)(void 0),e.push([t.i,".loading-bar-dialog{overflow:hidden}.loading-dialog__background-bar{position:absolute;height:100%;transition:width .2s ease-in-out;background-color:cyan;margin:-2rem;z-index:-1}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),i=function(){function t(t){var e=this;this.canvas=t,this.updateCanvasOffset(),setInterval(function(){e.updateCanvasOffset()},1e3)}return t.prototype.updateCanvasOffset=function(){this.canvasClientRect=this.canvas.getBoundingClientRect()},t.prototype.getPointFromMouseEvent=function(t){return new o.Point(t.clientX-this.canvasClientRect.left,t.clientY-this.canvasClientRect.top).floor()},t}();e.MousePositionTransformer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),i=n(14),r=n(25),a=n(0),s=n(8),l=n(28),c=n(1),u=n(32),h=n(3),p=function(){function t(t){this.pathLayer=new o.Layer(s.LEX.PATH_LAYER_NAME),this.canvas=t.canvas,this.stage=t.stage,this.polygonLayer=t.polygonLayer,this.mousePositionTransformer=t.mousePositionTransformer,this.renderer=t.renderer,this.eventAggregator=t.eventAggregator,this.closePath=this.closePath.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onPointClick=this.onPointClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.drawNewLineGuide=this.drawNewLineGuide.bind(this)}return t.prototype.init=function(){this.stage.layers.push(this.pathLayer),this.startNewUnfinishedPath()},t.prototype.destroy=function(){this.removeEventListeners(),this.stage.removeLayer(this.pathLayer)},t.prototype.addNewPoint=function(t){this.unfinishedPath.addVertex(t),this.dispatchUpdateUIEvents(),1===this.unfinishedPath.getVerticesCount()&&(this.lastMousePosition=t,this.addEventListeners())},t.prototype.onMouseMove=function(t){this.eventAggregator.dispatchEvent(new c.RenderEvent),this.lastMousePosition=this.mousePositionTransformer.getPointFromMouseEvent(t)},t.prototype.drawNewLineGuide=function(){var t=this.unfinishedPath.getVertex(this.unfinishedPath.getVerticesCount()-1);this.renderer.drawLine(t,this.lastMousePosition,a.configuration.newLinePreviewProperties)},t.prototype.onPointClick=function(t){var e=t.payload;if(e.path===this.unfinishedPath&&e.initial){t.handled=!0;try{this.closePath(),e.initial=!1}catch(t){alert(t.message)}}},t.prototype.startNewUnfinishedPath=function(){this.unfinishedPath=new i.Path([],a.configuration.newPolygonLineProperties),this.pathLayer.paths.push(this.unfinishedPath),this.removeEventListeners()},t.prototype.closePath=function(){if(this.unfinishedPath.getVerticesCount()<a.configuration.minPolygonPoints)throw new Error("Polygon must have at least "+a.configuration.minPolygonPoints+" vertices");this.unfinishedPath.lineProperties=a.configuration.polygonLineProperties;var t=new r.Polygon(this.unfinishedPath);this.polygonLayer.paths.push(t),this.pathLayer.removePath(this.unfinishedPath),this.startNewUnfinishedPath(),this.dispatchUpdateUIEvents()},t.prototype.dispatchUpdateUIEvents=function(){this.eventAggregator.dispatchEvent(new c.RenderEvent),this.eventAggregator.dispatchEvent(new h.SyncComponentsEvent)},t.prototype.onKeyDown=function(t){switch(t.keyCode){case 27:this.pathLayer.removePath(this.unfinishedPath),this.startNewUnfinishedPath(),this.dispatchUpdateUIEvents()}},t.prototype.addEventListeners=function(){this.canvas.addEventListener("mousemove",this.onMouseMove),this.eventAggregator.addEventListener(u.RenderFinishedEvent.name,this.drawNewLineGuide),window.addEventListener("keydown",this.onKeyDown),this.eventAggregator.addEventListener(l.PointClickEvent.eventType,this.onPointClick)},t.prototype.removeEventListeners=function(){this.canvas.removeEventListener("mousemove",this.onMouseMove),this.eventAggregator.removeEventListener(u.RenderFinishedEvent.name,this.drawNewLineGuide),window.removeEventListener("keydown",this.onKeyDown),this.eventAggregator.removeEventListener(l.PointClickEvent.eventType,this.onPointClick)},t}();e.NewPolygonUIController=p},function(t,e,n){"use strict";var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},r=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),s=n(1),l=n(3),c=function(){function t(t){this._isDragging=!1,this.eventAggregator=t.eventAggregator,this.stage=t.stage,this.canvas=t.canvas,this.mousePositionTransformer=t.mousePositionTransformer,this.closestPathFinder=t.closestPathFinder,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseOut=this.onMouseOut.bind(this)}return t.prototype.init=function(){},t.prototype.destroy=function(){this.stopDraggingPath()},Object.defineProperty(t.prototype,"isDragging",{get:function(){return this._isDragging},enumerable:!0,configurable:!0}),t.prototype.startMovingPath=function(t){var e=this.mousePositionTransformer.getPointFromMouseEvent(t);this.pathToDrag=void 0,this.previousPoint=void 0;var n=[];try{for(var i=o(this.stage.layers),a=i.next();!a.done;a=i.next()){var s=a.value,l=s.paths.filter(function(t){return t.isPointInBoundingBox(e)});n.push.apply(n,r(l))}}catch(t){c={error:t}}finally{try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(c)throw c.error}}if(0===n.length)return alert("Cannot drag path - no path found, point is not in the bounding box");this.pathToDrag=this.closestPathFinder.getClosestPath(n,e),this.previousPoint=e,this._isDragging=!0,this.addEventListeners();var c,u},t.prototype.addEventListeners=function(){this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseup",this.onMouseUp),this.canvas.addEventListener("mouseout",this.onMouseOut)},t.prototype.removeEventListeners=function(){this.canvas.removeEventListener("mousemove",this.onMouseMove),this.canvas.removeEventListener("mouseup",this.onMouseUp),this.canvas.removeEventListener("mouseout",this.onMouseOut)},t.prototype.onMouseMove=function(t){if(this.pathToDrag&&this.previousPoint){var e=this.mousePositionTransformer.getPointFromMouseEvent(t),n=a.Point.subtract(e,this.previousPoint);try{for(var i=o(this.pathToDrag.getVertices()),r=i.next();!r.done;r=i.next()){var c=r.value;c.moveTo(a.Point.add(c,n))}}catch(t){u={error:t}}finally{try{r&&!r.done&&(h=i.return)&&h.call(i)}finally{if(u)throw u.error}}this.eventAggregator.dispatchEvent(new s.RenderEvent),this.eventAggregator.dispatchEvent(new l.SyncComponentsEvent),this.previousPoint=e;var u,h}},t.prototype.onMouseUp=function(t){this.stopDraggingPath(),this.cancelNextClickEvent()},t.prototype.onMouseOut=function(t){this.stopDraggingPath(),this._isDragging=!1},t.prototype.stopDraggingPath=function(){this.removeEventListeners(),this.pathToDrag=void 0,this.previousPoint=void 0},t.prototype.cancelNextClickEvent=function(){var t=this,e=function(n){t.canvas.removeEventListener("click",e,!0),t._isDragging=!1,n.stopPropagation()};this.canvas.addEventListener("click",e,!0)},t}();e.PathDraggingService=c},function(t,e,n){"use strict";var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),r=n(13),a=n(11),s=n(0),l=n(8),c=n(33),u=n(34),h=n(35),p=n(1),d=n(3),f=function(){function t(t){this.eventAggregator=t.eventAggregator,this.stage=t.stage,this.canvas=t.canvas,this.onStartPointDrag=this.onStartPointDrag.bind(this),this.onFinishPointDrag=this.onFinishPointDrag.bind(this),this.onPointDrag=this.onPointDrag.bind(this)}return t.prototype.init=function(){this.pathGhostLayer=new r.Layer(l.LEX.PATH_GHOST_LAYER_NAME),this.stage.layers.splice(0,0,this.pathGhostLayer),this.eventAggregator.addEventListener(h.StartPointDragEvent.eventType,this.onStartPointDrag),this.eventAggregator.addEventListener(c.FinishPointDragEvent.eventType,this.onFinishPointDrag),this.eventAggregator.addEventListener(u.PointDragEvent.eventType,this.onPointDrag)},t.prototype.destroy=function(){this.pathGhostLayer.paths=[],this.stage.removeLayer(this.pathGhostLayer),this.eventAggregator.removeEventListener(h.StartPointDragEvent.eventType,this.onStartPointDrag),this.eventAggregator.removeEventListener(c.FinishPointDragEvent.eventType,this.onFinishPointDrag),this.eventAggregator.removeEventListener(u.PointDragEvent.eventType,this.onPointDrag)},t.prototype.onStartPointDrag=function(t){if(t.handled=!0,s.configuration.displayPathGhostWhenDragging){var e=t.payload.path.clone();e.lineProperties=new a.LineProperties(i.COLORS.GREEN,1),this.pathGhostLayer.paths.push(e),this.eventAggregator.dispatchEvent(new p.RenderEvent),this.eventAggregator.dispatchEvent(new d.SyncComponentsEvent)}},t.prototype.onFinishPointDrag=function(t){t.handled=!0,s.configuration.displayPathGhostWhenDragging&&(this.pathGhostLayer.paths=[],this.eventAggregator.dispatchEvent(new p.RenderEvent),this.eventAggregator.dispatchEvent(new d.SyncComponentsEvent))},t.prototype.onPointDrag=function(t){var e=t.payload,n=e.element,i=e.newPosition;try{for(var r=o(n.path.getVerticesIterator()),a=r.next();!a.done;a=r.next()){if(a.value.equals(i))return}}catch(t){c={error:t}}finally{try{a&&!a.done&&(u=r.return)&&u.call(r)}finally{if(c)throw c.error}}var s=i.x,l=i.y;s<0?s=0:s>=this.canvas.width&&(s=this.canvas.width-1),l<0?l=0:l>=this.canvas.height&&(l=this.canvas.height-1),n.point.moveTo(s,l),this.eventAggregator.dispatchEvent(new p.RenderEvent),t.handled=!0;var c,u},t}();e.PointDraggingService=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(36),i=n(1),r=n(3),a=n(0),s=function(){function t(t){this.previousLineClickTimestamp=0,this.eventAggregator=t.eventAggregator,this.onLineClick=this.onLineClick.bind(this)}return t.prototype.init=function(){this.eventAggregator.addEventListener(o.LineClickEvent.eventType,this.onLineClick)},t.prototype.destroy=function(){this.eventAggregator.removeEventListener(o.LineClickEvent.eventType,this.onLineClick)},t.prototype.onLineClick=function(t){var e=this.previousLineHit,n=this.previousLineClickTimestamp,o=Date.now();if(this.previousLineHit=t.payload.line,this.previousLineClickTimestamp=o,e&&!(o-n>a.configuration.doubleClickMaxDelay)&&e.equals(t.payload.line)){var s=t.payload.path.findPointIndex(t.payload.line.p2),l=t.payload.line.getMiddlePoint(),c=l.floor();try{t.payload.path.insertVertex(c,s)}catch(t){return alert(t.message)}this.eventAggregator.dispatchEvent(new i.RenderEvent),this.eventAggregator.dispatchEvent(new r.SyncComponentsEvent)}},t}();e.PointInserterService=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=n(28),r=n(1),a=n(3),s=function(){function t(t){this.previousClickTimestamp=0,this.eventAggregator=t.eventAggregator,this.onPointClick=this.onPointClick.bind(this)}return t.prototype.init=function(){this.eventAggregator.addEventListener(i.PointClickEvent.eventType,this.onPointClick)},t.prototype.destroy=function(){this.eventAggregator.removeEventListener(i.PointClickEvent.eventType,this.onPointClick)},t.prototype.onPointClick=function(t){var e=Date.now(),n=t.payload,i=this.previousPathPointElement,r=this.previousClickTimestamp;this.updatePreviousClickInformation(t,e),i&&i===n&&(e-r>o.configuration.doubleClickMaxDelay||(this.removePreviousClickedPoint(),t.handled=!0))},t.prototype.updatePreviousClickInformation=function(t,e){this.previousPathPointElement=t.payload,this.previousClickTimestamp=e},t.prototype.removePreviousClickedPoint=function(){var t=this.previousPathPointElement.path,e=this.previousPathPointElement.point;try{t.removeVertex(e)}catch(t){return alert("Cannot remove vertex")}this.previousPathPointElement.remove(),this.eventAggregator.dispatchEvent(new r.RenderEvent),this.eventAggregator.dispatchEvent(new a.SyncComponentsEvent)},t}();e.PointRemoverService=s},function(t,e,n){"use strict";var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(84),a=n(3),s=function(){function t(t){this.pathPointElements=[],this.stage=t.stage,this.container=t.container,this.mousePositionTransformer=t.mousePositionTransformer,this.eventAggregator=t.eventAggregator,this.pathPointDependencies={eventAggregator:this.eventAggregator,mousePositionTransformer:this.mousePositionTransformer},this.synchronizeElements=this.synchronizeElements.bind(this)}return t.prototype.init=function(){this.eventAggregator.addEventListener(a.SyncComponentsEvent.eventType,this.synchronizeElements)},t.prototype.destroy=function(){this.eventAggregator.removeEventListener(a.SyncComponentsEvent.eventType,this.synchronizeElements)},t.prototype.synchronizeElements=function(t){var e=this,n=this.getRedundantElements();n.forEach(function(t){return t.remove()});var o=this.getPathPointTuples(),r=this.getPointsWithoutElements(o),a=this.createPathPointElements(r);a.forEach(function(t){return e.container.appendChild(t)});var s=this.pathPointElements.filter(function(t){return-1===n.indexOf(t)});this.pathPointElements=i(a,s),t.handled=!0},t.prototype.getPathPointTuples=function(){var t=[];return this.stage.layers.forEach(function(e){e.paths.forEach(function(e){e.getVertices().forEach(function(n){t.push({path:e,point:n})})})}),t},t.prototype.createPathPointElements=function(t){var e=this;return t.map(function(t){return new r.PathPointElement(t.path,t.point,e.pathPointDependencies)})},t.prototype.getRedundantElements=function(){var t=this.getActivePaths();return this.pathPointElements.filter(function(e){return-1===t.indexOf(e.path)||-1===e.path.getVertices().indexOf(e.point)})},t.prototype.getPointsWithoutElements=function(t){var e=this;return t.filter(function(t){return!e.pathPointElements.find(function(e){return e.path===t.path&&e.point===t.point})})},t.prototype.getActivePaths=function(){var t=[];return this.stage.layers.map(function(e){return t.push.apply(t,i(e.paths))}),t},t}();e.PointSyncService=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(33),r=n(34),a=n(35),s=n(28);n(85);var l={COMPONENT:"application-ui__vertex",INITIAL:"application-ui__vertex--initial"},c=function(t){function e(e,n,o){var i=t.call(this)||this;return i.classList.add(l.COMPONENT),i.path=e,i.point=n,i.mousePositionTransformer=o.mousePositionTransformer,i.eventAggregator=o.eventAggregator,i.updatePosition=i.updatePosition.bind(i),i.onMouseDown=i.onMouseDown.bind(i),i.onMouseMove=i.onMouseMove.bind(i),i.stopDragging=i.stopDragging.bind(i),i}return o(e,t),e.prototype.updatePosition=function(){this.style.backgroundColor=this.path.lineProperties.color.fillStyle,this.style.top=this.point.y+"px",this.style.left=this.point.x+"px"},Object.defineProperty(e.prototype,"initial",{get:function(){return this.classList.contains(l.INITIAL)},set:function(t){t?this.classList.add(l.INITIAL):this.classList.remove(l.INITIAL)},enumerable:!0,configurable:!0}),e.prototype.connectedCallback=function(){this.updatePosition(),(1===this.path.getVerticesCount()||!this.path.closed&&0===this.path.findPointIndex(this.point))&&(this.initial=!0),this.addEventListener("mousedown",this.onMouseDown),this.point.moveCallback=this.updatePosition},e.prototype.disconnectedCallback=function(){this.point.moveCallback=null,this.removeEventListener("mousedown",this.onMouseDown)},e.prototype.onMouseDown=function(){var t=new s.PointClickEvent(this);this.eventAggregator.dispatchEvent(t),t.handled||(this.eventAggregator.dispatchEvent(new a.StartPointDragEvent(this)),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.stopDragging))},e.prototype.onMouseMove=function(t){var e=this.mousePositionTransformer.getPointFromMouseEvent(t);this.eventAggregator.dispatchEvent(new r.PointDragEvent(this,e))},e.prototype.stopDragging=function(){this.eventAggregator.dispatchEvent(new i.FinishPointDragEvent(this)),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.stopDragging)},e}(HTMLElement);e.PathPointElement=c,customElements.define("app-path-point",c)},function(t,e,n){var o=n(86);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(5)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(4)(void 0),e.push([t.i,".application-ui__vertex{border:1px solid #000;width:10px;height:10px;position:absolute;transform:translate(-50%,-50%);border:2px solid}.application-ui__vertex:not(:active){border-color:green}.application-ui__vertex:active{border-color:red}.application-ui__vertex--initial{background-color:#0051ff}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(88),i=n(89),r=function(){function t(t){this.eventAggregator=t.eventAggregator,this.stage=t.stage}return t.prototype.init=function(){var t=document.getElementById("serialization-container");if(!t)throw new Error("Serialization container not found");this.serializationContainer=t;var e=new o.LoadButton({eventAggregator:this.eventAggregator,stage:this.stage}),n=new i.SaveButton({stage:this.stage});this.serializationContainer.appendChild(e),this.serializationContainer.appendChild(n)},t.prototype.destroy=function(){this.serializationContainer.innerHTML=""},t}();e.SerializationService=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(3),a=n(8),s=function(t){function e(e){var n=t.call(this)||this;return n.eventAggregator=e.eventAggregator,n.stage=e.stage,n.buttonElement=document.createElement("button"),n.buttonElement.innerText="Load",n.appendChild(n.buttonElement),n.onClick=n.onClick.bind(n),n}return o(e,t),e.prototype.connectedCallback=function(){this.buttonElement.addEventListener("click",this.onClick)},e.prototype.disconnectedCallback=function(){this.buttonElement.removeEventListener("click",this.onClick)},e.prototype.onClick=function(){var t=prompt("Please paste the serialized data");if(t){var e=this.stage.findLayerByName(a.LEX.POLYGON_LAYER_NAME),n=e.toSerializableObject();try{var o=JSON.parse(t);e.fromSerializableObject(o)}catch(t){e.fromSerializableObject(n),alert("Invalid data")}this.eventAggregator.dispatchEvent(new i.RenderEvent),this.eventAggregator.dispatchEvent(new r.SyncComponentsEvent)}},e}(HTMLElement);e.LoadButton=s,customElements.define("app-load-button",s)},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),r=function(t){function e(e){var n=t.call(this)||this;return n.stage=e.stage,n.buttonElement=document.createElement("button"),n.buttonElement.innerText="Save",n.appendChild(n.buttonElement),n.onClick=n.onClick.bind(n),n}return o(e,t),e.prototype.connectedCallback=function(){this.buttonElement.addEventListener("click",this.onClick)},e.prototype.disconnectedCallback=function(){this.buttonElement.removeEventListener("click",this.onClick)},e.prototype.onClick=function(){var t=this.stage.findLayerByName(i.LEX.POLYGON_LAYER_NAME),e=t.toSerializableObject(),n=JSON.stringify(e);prompt("Copy the data",n)},e}(HTMLElement);e.SaveButton=r,customElements.define("app-save-button",r)},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0}),n(91);var i=function(t){function e(){var e=t.call(this)||this;return e.dialogBoxStack=[],e.overlayElement=document.createElement("div"),e.overlayElement.classList.add("overlay"),e.appendChild(e.overlayElement),e.onOverlayClick=e.onOverlayClick.bind(e),e.onDialogClose=e.onDialogClose.bind(e),e}return o(e,t),e.prototype.connectedCallback=function(){this.overlayElement.addEventListener("click",this.onOverlayClick)},e.prototype.disconnectedCallback=function(){this.overlayElement.removeEventListener("click",this.onOverlayClick)},e.prototype.showDialog=function(t){0===this.dialogBoxStack.length&&this.showOverlay(),this.dialogBoxStack.push(t),this.appendChild(t),t.addEventListener("close",this.onDialogClose),requestAnimationFrame(function(){t.classList.add("dialog-box--active")})},e.prototype.onOverlayClick=function(){if(0!==this.dialogBoxStack.length){var t=this.dialogBoxStack[this.dialogBoxStack.length-1];t.canClose()&&t.close()}},e.prototype.onDialogClose=function(t){var e=t.target;this.removeChild(e),e.removeEventListener("close",this.onDialogClose),requestAnimationFrame(function(){e.classList.remove("dialog-box--active")});var n=this.dialogBoxStack.indexOf(e);this.dialogBoxStack.splice(n,1),0===this.dialogBoxStack.length&&this.hideOverlay()},e.prototype.showOverlay=function(){this.overlayElement.classList.add("overlay--visible"),document.body.classList.add("popup-active")},e.prototype.hideOverlay=function(){this.overlayElement.classList.remove("overlay--visible"),document.body.classList.remove("popup-active")},e}(HTMLElement);e.DialogOverlay=i,customElements.define("app-dialog-overlay",i)},function(t,e,n){var o=n(92);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(5)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(4)(void 0),e.push([t.i,"body.popup-active{overflow:hidden}.overlay{position:fixed;top:0;left:0;width:100%;height:100%;opacity:0;z-index:1;background-color:#000;transition:opacity .25s ease-in-out;pointer-events:none}.overlay--visible{opacity:.5;pointer-events:all}",""])},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(37),r=function(t){function e(){var e=t.call(this)||this;return e.button=document.createElement("button"),e.button.textContent="Instructions",e.button.className="instructions-button",e.appendChild(e.button),e.onButtonClick=e.onButtonClick.bind(e),e.instructionsDialog=new i.InstructionsDialog,e}return o(e,t),Object.defineProperty(e,"observedAttributes",{get:function(){return["dialog-overlay-id"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialogOverlayId",{get:function(){return this.getAttribute("dialog-overlay-id")||""},set:function(t){this.setAttribute("dialog-overlay-id",t)},enumerable:!0,configurable:!0}),e.prototype.connectedCallback=function(){this.button.addEventListener("click",this.onButtonClick)},e.prototype.disconnectedCallback=function(){this.button.removeEventListener("click",this.onButtonClick)},e.prototype.onButtonClick=function(){var t=document.getElementById(this.dialogOverlayId);if(!t)throw new Error("Dialog overlay not found");t.showDialog(this.instructionsDialog)},e}(HTMLElement);e.InstructionsButton=r,window.customElements.define("app-instructions-button",r)},function(t,e,n){var o=n(95);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(5)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(4)(void 0),e.push([t.i,".instructions-dialog{background-color:#1f350f;color:#eee}.instructions-dialog__title{margin:0}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(3),r=function(){function t(t){this.polygonClipper=t.polygonClipper,this.eventAggregator=t.eventAggregator,this.polygonLayer=t.polygonLayer,this.closestPathFinder=t.closestPathFinder}return t.prototype.init=function(){},t.prototype.destroy=function(){},t.prototype.clipPolygons=function(t){var e=this.polygonLayer.paths.filter(function(e){return e.isPointInBoundingBox(t)});if(e.length<2)return alert("Click in the bounding box of at least 2 polygons");var n=e.filter(function(t){return t.isConvex()});if(0===n.length)return alert("Cannot find a convex polygon");var r=this.closestPathFinder.getClosestPath(n,t),a=e.filter(function(t){return t!==r}),s=this.closestPathFinder.getClosestPath(a,t),l=this.polygonClipper.clipPolygon(s,r);if(!l)return alert("Cannot clip polygons (they do not overlap)");this.polygonLayer.removePath(s),this.polygonLayer.removePath(r),this.polygonLayer.paths.push(l),this.eventAggregator.dispatchEvent(new i.SyncComponentsEvent),this.eventAggregator.dispatchEvent(new o.RenderEvent)},t}();e.PolygonClippingService=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(98),i=function(){function t(){this.listenerMap=new Map,this.eventQueue=new o.EventQueue,this.isDispatching=!1}return t.prototype.addEventListener=function(t,e){var n=this.getEventListeners(t);-1===n.indexOf(e)&&n.push(e),this.listenerMap.set(t,n)},t.prototype.removeEventListener=function(t,e){var n=this.getEventListeners(t),o=n.indexOf(e);-1!==o&&n.splice(o,1),this.listenerMap.set(t,n)},t.prototype.dispatchEvent=function(t){this.eventQueue.enqueue(t),this.isDispatching||this.dispatchEventFromQueue()},t.prototype.dispatchEventFromQueue=function(){this.isDispatching=!0;var t=this.eventQueue.dequeue();this.getEventListeners(t.eventType).forEach(function(e){return e(t)}),this.eventQueue.isEmpty()?this.isDispatching=!1:this.dispatchEventFromQueue()},t.prototype.getEventListeners=function(t){return this.listenerMap.get(t)||[]},t}();e.EventAggregator=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this._queue=[]}return t.prototype.enqueue=function(t){this._queue.push(t)},t.prototype.dequeue=function(){if(this.isEmpty())throw new Error("Queue is empty");return this._queue.splice(0,1)[0]},t.prototype.getLength=function(){return this._queue.length},t.prototype.isEmpty=function(){return 0===this.getLength()},t}();e.EventQueue=o}]);